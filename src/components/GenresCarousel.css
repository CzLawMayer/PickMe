/* Overlay covers results area but doesn't block page scroll */
.genres-overlay {
  position: absolute;
  inset: 0;
  z-index: 30;
  pointer-events: none;                  /* overlay ignores events */
  display: grid;
  align-items: stretch;
}

/* Only these accept pointer events */
.genres-viewport,
.genres-nav { pointer-events: auto; }

/* Viewport provides height & clipping */
.genres-viewport {
  position: relative;
  overflow: hidden !important;
  width: 100%;
  height: 100% !important;
  min-height: 360px;
  display: grid;
}

/* Track uses CSS Grid: one column per stripe, no gaps by default */
.genres-track {
  position: absolute;
  top: 0; bottom: 0; left: 0;
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: var(--stripe-w, 325px);
  gap: var(--stripe-gap, 0);
  align-items: stretch;                 /* stripes fill height */
  width: max-content;
  will-change: transform;
  transform: translate3d(0,0,0);
}

/* Stripe base is invisible; paint lives on ::before */
.genre-stripe {
  --stripe-w: 325px;
  width: var(--stripe-w);
  height: 100%;
  min-height: 320px;
  position: relative;
  overflow: visible;
  border: 0;
  background: transparent;
  box-shadow: none;
  cursor: pointer;
  user-select: none;
  z-index: 1;
}

/* Slanted paint on before-layer (prevents black rectangles) */
.genre-stripe::before {
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  left: calc(-1 * var(--stripe-bleed, 14px));
  right: calc(-1 * var(--stripe-bleed, 14px));
  pointer-events: none;
  z-index: 0;

  background:
    linear-gradient(-12deg,
      hsl(var(--stripe-hue, 0) 72% 56%) 0%,
      hsl(calc(var(--stripe-hue, 0) + 28) 72% 56%) 100%);
  box-shadow: 0 12px 36px rgba(0,0,0,.38), inset 0 0 0 1px rgba(255,255,255,.06);

  transform: skewX(var(--stripe-tilt-deg, -18deg));
  transform-origin: center;
  will-change: transform, filter, box-shadow;
  transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease;
}

/* Hover & active pop only affect the paint layer */
.genre-stripe:hover::before { filter: brightness(1.06); }

.genre-stripe[data-active="true"] { z-index: 5; }
.genre-stripe[data-active="true"]::before {
  transform: skewX(var(--stripe-tilt-deg, -18deg)) scale(1.06);
  box-shadow: 0 16px 44px rgba(0,0,0,.46), inset 0 0 0 1px rgba(255,255,255,.08);
}

/* Big centered caption */
.genres-caption {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  pointer-events: none;
  z-index: 60;
}

.genres-caption > div {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding-inline: 24px;
}

.genres-title-overlay {
  color: #fff;
  font-weight: 900;
  text-shadow: 0 2px 8px rgba(0,0,0,0.45), 0 8px 28px rgba(0,0,0,0.35);
  letter-spacing: -0.02em;
  line-height: 1.02;
  font-size: clamp(40px, 8.8vw, 120px);
  margin: 0 0 clamp(18px, 2.6vw, 34px) 0;
}

.genres-desc-overlay {
  color: #fff;
  font-weight: 600;
  opacity: 0.98;
  font-size: clamp(18px, 2.2vw, 23px);
  line-height: 1.45;
  max-width: min(900px, 92vw);
  margin: 0;
}

/* Arrow buttons */
.genres-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 70;
  width: 56px;
  height: 56px;
  border: 0;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.55);
  color: #fff;
  font-size: 36px;
  line-height: 1;
  display: grid;
  place-items: center;
  cursor: pointer;
  user-select: none;
  transition: transform 120ms ease, filter 120ms ease;
}
.genres-nav--left  { left: 12px; }
.genres-nav--right { right: 12px; }
.genres-nav:hover  { filter: brightness(1.1); }
.genres-nav:active { transform: translateY(-50%) scale(0.98); }

@media (max-width: 900px) {
  .genres-nav { width: 48px; height: 48px; font-size: 30px; }
}
@media (max-width: 600px) {
  .genres-nav { width: 44px; height: 44px; font-size: 28px; }
}

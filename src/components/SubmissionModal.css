:root{
  --modal-bg: #1f1f1f;
  --ink: #fff;
  --muted: #bdbdbd;

  /* label colors (match your UI) */
  --c-orange: #ef6c00;   /* Title/Author/Language */
  --c-pink:   #d81b60;   /* Date/Copy/Allow comments */
  --c-purple: #6a1b9a;   /* Main Genre/ISBN */
  --c-blue:   #1e88e5;   /* Sub-Genres/NSFW */

  --pad: 16px;
  --gap: 14px;
}

/* ---- overlay ---- */
.submodal-overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: grid;
  place-items: center;
  z-index: 1000;
}

/* ---- modal container: 90% page area ---- */
.submodal{
  width: 90vw;
  height: 90vh;
  background: var(--modal-bg);
  color: var(--ink);
  border: 2px solid rgba(255,255,255,.08);
  border-radius: 6px;
  box-shadow: 0 20px 60px rgba(0,0,0,.45);
  position: relative;
  overflow: hidden;
}

/* close X */
.submodal-close{
  position: absolute;
  top: 10px;
  right: 14px;
  font-size: 28px;
  line-height: 1;
  color: #fff;
  opacity: .9;
  border: 0;
  background: transparent;
  cursor: pointer;
}

/* two columns */
.submodal-grid{
  display: grid;
  grid-template-columns: 42% 58%;
  gap: 20px;
  height: 100%;
  padding: 20px;
}

/* left column */
.sub-left{
  display: grid;
  grid-template-rows: auto auto 1fr;
  gap: 16px;
  min-height: 0;
}

/* "New Project" chip (top-left) */
.chip-title{
  display: inline-block;
  background: #1e88e5;     /* bright blue like screenshot tag */
  color: #fff;
  font-weight: 800;
  padding: 6px 10px;
  border-radius: 4px;
  font-size: 1.25rem;
}

/* cover uploaders (two equal columns) */
.covers{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  min-height: 0;
}
.cover-uploader{
  display: block;
  cursor: pointer;
}
.cover-uploader input{ display: none; }

/* keep 2:3 aspect, full bleed image if present */
.cover-box{
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  background: #111;
  border: 2px solid rgba(255,255,255,.12);
  overflow: hidden;
}
.cover-box img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.cover-hint{
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  text-align: center;
  color: #fff;
  font-weight: 800;
  font-size: clamp(16px, 2vw, 22px);
  opacity: .9;
}

/* Summary */
.summary-block{
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 8px;
  min-height: 0;
}
.summary-label{
  font-weight: 800;
  font-size: 1.1rem;
}
.summary-input{
  width: 100%;
  height: 100%;
  resize: none;
  background: #141414;
  color: #fff;
  border: 2px solid rgba(255,255,255,.12);
  border-radius: 2px;
  padding: 10px;
  font-size: 0.98rem;
  line-height: 1.4;
}

/* right column */
.sub-right{
  display: grid;
  grid-template-rows: repeat(10, auto) 1fr auto; /* 8 fields + 2 checks + spacer + actions */
  gap: 10px;
  min-height: 0;
  align-content: start;
}

/* field row: label chip + input */
.field{
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 8px;
  align-items: center;
}
.field-label{
  color: #fff;
  font-weight: 800;
  padding: 10px 12px;
  border-radius: 4px;
  text-align: right;
  white-space: nowrap;
}
.field-input{
  height: 40px;
  background: #111;
  border: 2px solid rgba(255,255,255,.14);
  color: #fff;
  border-radius: 2px;
  padding: 0 12px;
  font-size: 1.1rem;
}

/* checks row */
.checks-row{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.check{
  display: grid;
  grid-template-columns: 200px auto;
  gap: 8px;
  align-items: center;
}
.check-label{
  color: #fff;
  font-weight: 800;
  padding: 10px 12px;
  border-radius: 4px;
  text-align: right;
}
.check-box{
  width: 40px;
  height: 40px;
  background: #111;
  border: 2px solid rgba(255,255,255,.14);
  border-radius: 4px;
  position: relative;
  cursor: pointer;
  display: grid;
  place-items: center;
}
.check-tick{
  font-size: 22px;
  color: #ffb300; /* amber tick for contrast */
  opacity: 0;     /* hidden when off */
}
.check-box.is-on .check-tick{ opacity: 1; }

/* push actions to bottom with a spacer row in grid */
.actions{
  margin-top: auto;
  display: grid;
  grid-auto-flow: column;
  gap: 12px;
  justify-content: end;
}
.btn{
  min-width: 160px;
  height: 52px;
  border: 0;
  border-radius: 4px;
  font-weight: 900;
  font-size: 1.2rem;
  cursor: pointer;
}
.btn.cancel{
  background: #e53935;
  color: #fff;
}
.btn.save{
  background: #43a047;
  color: #fff;
}

/* responsive fallback */
@media (max-width: 980px){
  .submodal-grid{
    grid-template-columns: 1fr;
    overflow: auto;
  }
  .sub-right .field,
  .sub-right .check{
    grid-template-columns: 160px 1fr;
  }
}

/* Give the whole modal bigger interior padding */
.submodal-grid{
  padding: 28px 32px;   /* was 20px */
  gap: 24px;            /* a touch more column gap */
}

/* Add inner padding on each column so content never hits the edges */
.sub-left{
  padding: 0 8px 8px 8px;
}
.sub-right{
  padding: 0 8px 8px 8px;
}

/* Widen field label gutter slightly so inputs sit further from right edge */
.field{
  grid-template-columns: 220px 1fr;   /* was 200px + 1fr */
  gap: 12px;                          /* was 8–10px */
}

/* Buttons area: keep off the right wall */
.actions{
  padding-right: 4px;
  gap: 16px;          /* a bit more space between Cancel / Save */
}

/* On smaller screens, increase container padding a bit for comfort */
@media (max-width: 980px){
  .submodal-grid{
    padding: 24px;
  }
  .sub-right .field,
  .sub-right .check{
    grid-template-columns: 180px 1fr; /* still adds margin without crowding */
  }
}

/* --- align right column start with top of covers --- */
:root{
  /* tune if you change the chip size or spacing */
  --chip-h: 44px;      /* visual height of "New Project" chip */
  --chip-gap: 16px;    /* space between chip and covers */
}

/* give the chip a predictable height so we can offset the right side */
.chip-title{
  min-height: var(--chip-h);
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;             /* keep your existing look */
}

/* offset the right column so Title: aligns with covers, not the chip */
.sub-right{
  padding-top: calc(var(--chip-h) + var(--chip-gap));
}

/* responsive: when stacked, remove the offset */
@media (max-width: 980px){
  .sub-right{
    padding-top: 0;
  }
}

/* Make both columns stretch the same full height of the modal */
.submodal-grid{
  height: 100%;
  align-items: stretch;
}

/* Left column already ends with the Summary block that fills remaining space */
.sub-left{
  min-height: 0; /* allow the textarea to grow */
}

/* Right column: keep spacer -> actions at the very bottom */
.sub-right{
  min-height: 0;
  display: grid;
  /* 8 fields + 2 checks + spacer + actions */
  grid-template-rows: repeat(10, auto) 1fr auto;
}

/* Actions pinned to the bottom and spanning full width */
.actions{
  align-self: end;              /* stick to the bottom row */
  margin-top: 0;                /* we don’t need auto now */
  width: 100%;
  display: grid;
  grid-template-columns: 1fr 1fr;  /* two equal buttons */
  gap: 16px;
  padding-right: 0;             /* keep edges clean */
}

/* Buttons fill their grid cell entirely */
.btn{
  width: 100%;
  height: 56px;                 /* a touch taller for presence */
}

/* Mobile: stack the buttons full-width */
@media (max-width: 980px){
  .actions{
    grid-template-columns: 1fr;
  }
}

/* Stack NSFW and Allow comments vertically (NSFW first, then Allow comments) */
.checks-row{
  grid-template-columns: 1fr !important; /* was 1fr 1fr */
  gap: 12px;                              /* vertical space between them */
}

/* Fill the modal height so both columns align */
.submodal-grid{ height: 100% !important; }

/* Right column: make rows grow and pin actions to bottom */
.sub-right{
  height: 100% !important;
  min-height: 0;
  display: flex !important;
  flex-direction: column;
  row-gap: 8px; /* tighter gaps so growth looks clean */
}

/* Every row above the buttons grows to consume available space */
.sub-right > .field,
.sub-right > .checks-row{
  flex: 1 1 0;                  /* <-- key: grow rows */
  display: grid;
  grid-template-columns: 220px 1fr;  /* keep your label gutter */
  align-items: stretch;         /* inputs fill the row’s height */
}

/* Stack NSFW and Allow comments vertically (keeps from earlier) */
.checks-row{
  grid-template-columns: 1fr !important;
  gap: 8px;
}
.check{
  display: grid;
  grid-template-columns: 220px 1fr;
  align-items: stretch;
  gap: 10px;
}

/* Controls fill the taller rows */
.field-input{
  height: 100%;
  min-height: 44px;   /* adjust if you want them even taller */
}
.check-box{
  height: 100%;
  min-height: 44px;
  display: grid;
  place-items: center;
}

/* Buttons sit flush at the bottom and stretch horizontally */
.actions{
  margin-top: auto !important;  /* <-- pins to bottom */
  width: 100%;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.btn{ width: 100%; height: 56px; }

/* Ensure the left Summary truly reaches the bottom for perfect alignment */
.sub-left{
  grid-template-rows: auto auto 1fr; /* chip + covers + summary(fill) */
  min-height: 0;
}
.summary-block{ grid-template-rows: auto 1fr; min-height: 0; }
.summary-input{ height: 100%; min-height: 0; }

/* Right column stays flex so rows can grow */
.sub-right{
  display: flex !important;
  flex-direction: column;
}

/* Each text field = 1 row unit */
.sub-right > .field{
  flex: 1 1 0;
  display: grid;
  grid-template-columns: 220px 1fr;
  align-items: stretch;
}

/* Checks block = TWO row units, split into two equal rows */
.sub-right > .checks-row{
  flex: 2 1 0;                 /* equals height of two field rows */
  display: grid !important;
  grid-template-rows: 1fr 1fr; /* NSFW (1fr) + Allow comments (1fr) */
  gap: 8px;                    /* small gap between the two rows */
}

/* Each check row mirrors a field row and stretches fully */
.check{
  display: grid;
  grid-template-columns: 220px 1fr;  /* label | box */
  align-items: stretch;
  min-height: 0;
}

/* Label chip fills height and centers text */
.check-label{
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

/* The checkbox “box” fills the row height like an input */
.check-box{
  height: 100% !important;
  width: 100%;
  display: grid;
  place-items: center;
}

/* Optional: keep tick nicely sized inside the taller box */
.check-tick{ font-size: 22px; }

/* Make the NSFW / Allow comments inputs square, not full-width */
:root { --ctrl-h: 46px; } /* keep in sync with your field height */

.check{
  grid-template-columns: 220px var(--ctrl-h) !important; /* fixed box column */
  align-items: center;
  gap: 10px;
}

.check-box{
  width: var(--ctrl-h) !important;
  height: var(--ctrl-h) !important;
  aspect-ratio: 1 / 1;
  justify-self: start;   /* sits right after the label */
  align-self: center;    /* centered vertically within the row */
  display: grid;
  place-items: center;
}

.check-tick{ font-size: 22px; }

/* Use the same label gutter everywhere */
:root { --label-col: 220px; --ctrl-h: 46px; }

/* The checks block still takes two row units (so each check = one field row) */
.sub-right > .checks-row{
  flex: 2 1 0;                 /* equals height of two field rows */
  display: grid !important;
  grid-template-rows: 1fr 1fr; /* NSFW (1fr) + Allow comments (1fr) */
  gap: 8px;
}

/* Each check row is a full-width field-like row */
.check{
  display: grid !important;
  grid-template-columns: var(--label-col) 1fr !important;  /* <-- back to full 2-column */
  align-items: stretch;
  min-height: var(--ctrl-h);                               /* matches text fields */
}

/* Label fills height and centers text */
.check-label{
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

/* Checkbox stays a square, centered vertically; row keeps full height */
.check-box{
  width: var(--ctrl-h) !important;
  height: var(--ctrl-h) !important;
  aspect-ratio: 1 / 1;
  justify-self: start;     /* sits right after label */
  align-self: center;      /* vertically centered within the taller row */
  display: grid;
  place-items: center;
}

/* "New Project" chip should hug its text, not fill the row */
.chip-title{
  display: inline-flex;     /* shrink to content */
  width: max-content;       /* no stretching */
  align-self: start;        /* top-left of its grid cell */
  justify-self: start;
  white-space: nowrap;      /* keep on one line */
  min-height: var(--chip-h, 44px); /* keep your earlier height if set */
  padding: 6px 10px;        /* keep existing paddings */
}

/* ======== REMOVE ALL ROUNDED CORNERS (square edges everywhere) ======== */

/* modal container */
.submodal {
  border-radius: 0 !important;
}

/* label chips, cover boxes, text inputs, checkboxes, and buttons */
.chip-title,
.field-label,
.field-input,
.check-label,
.check-box,
.cover-box,
.summary-input,
.btn,
.submodal-close {
  border-radius: 0 !important;
}

/* summary and file inputs */
.cover-uploader input,
.summary-input {
  border-radius: 0 !important;
}

/* make sure buttons and form controls stay squared on hover/focus too */
.btn:focus,
.btn:hover,
.field-input:focus,
.check-box:focus,
.cover-box:focus {
  border-radius: 0 !important;
}

/* remove any residual rounding from the whole component grid */
.submodal-grid,
.sub-left,
.sub-right,
.actions {
  border-radius: 0 !important;
}

/* === FINAL SPACING FIX: keep inputs away from the right edge === */

/* 1) Remove padding from the grid so it doesn't fight our column padding */
.submodal-grid {
  padding: 0 !important;
  gap: 0;                    /* we’ll control gaps ourselves */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* 2) Give BOTH columns the same inner padding from the modal border */
.sub-left,
.sub-right {
  padding: 28px 32px 24px 32px !important;  /* top, right, bottom, left */
  box-sizing: border-box;
}

/* 3) Inside the right column, let rows/inputs fill their column but never
      push beyond it */
.sub-right {
  min-width: 0;              /* allow it to shrink if needed */
}

.field,
.check {
  min-width: 0;
}

.field-input {
  width: 100%;
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

/* 4) Buttons follow the same rule, they stay inside the padding box */
.actions {
  width: 100%;
}

/* Mobile: keep some padding when stacked vertically */
@media (max-width: 980px) {
  .sub-left,
  .sub-right {
    padding: 24px !important;
  }
}

/* === Strip all light grey borders from fields & covers === */

/* Text inputs + summary textarea: no borders, no outlines */
.field-input,
.field-input:focus,
.field-input:focus-visible,
.summary-input,
.summary-input:focus,
.summary-input:focus-visible {
  border: none !important;
  outline: none !important;
}

/* Cover boxes: no border, no outline */
.cover-box,
.cover-box:focus,
.cover-box:focus-visible {
  border: none !important;
  outline: none !important;
}

/* === RECTANGLE LAYOUT: covers+summary ↔ inputs+buttons === */

/* Shared layout tokens */
:root {
  --sub-col-pad-top: 28px;
  --sub-col-pad-x: 32px;
  --sub-col-pad-bottom: 24px;
  --sub-chip-h: 44px;    /* height of "New Project" chip */
  --sub-chip-gap: 16px;  /* space between chip and covers */
  --sub-label-col: 220px;
  --sub-row-min-h: 44px; /* min height for all field rows */
}

/* Modal grid fills the modal and keeps both columns same height */
.submodal {
  height: 90vh; /* already there, just reinforcing */
}

.submodal-grid {
  height: 100%;
  display: grid;
  grid-template-columns: 42% 58%;
  align-items: stretch;
  padding: 0 !important;         /* padding handled per-column */
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Both columns get the same outer padding from the modal border */
.sub-left,
.sub-right {
  padding: var(--sub-col-pad-top) var(--sub-col-pad-x)
           var(--sub-col-pad-bottom) var(--sub-col-pad-x);
  box-sizing: border-box;
  min-height: 0;
}

/* LEFT: chip + covers + summary fills full column height */
.sub-left {
  display: grid;
  grid-template-rows: auto auto 1fr; /* chip, covers, summary */
  row-gap: 16px;
}

/* Chip has predictable height so we can match on the right */
.chip-title {
  min-height: var(--sub-chip-h);
  display: inline-flex;
  align-items: center;
}

/* Summary stretches to the bottom of the left column */
.summary-block {
  display: grid;
  grid-template-rows: auto 1fr; /* label + textarea */
  min-height: 0;
}
.summary-input {
  height: 100%;
  min-height: 0;
}

/* RIGHT: offset down so Title aligns with covers top */
.sub-right {
  display: flex !important;
  flex-direction: column;
  /* top padding: same as left + chip height + gap before covers */
  padding-top: calc(
    var(--sub-col-pad-top) + var(--sub-chip-h) + var(--sub-chip-gap)
  ) !important;
  min-width: 0;
}

/* All fields & the checks block share the available height equally */
.sub-right > .field,
.sub-right > .checks-row {
  flex: 1 1 0;
  display: grid;
  grid-template-columns: var(--sub-label-col) 1fr;
  align-items: stretch;
  min-width: 0;
}

/* Checks row = two stacked "field-sized" rows (NSFW + Allow comments) */
.checks-row {
  display: grid !important;
  grid-template-rows: 1fr 1fr;
  row-gap: 8px;
}

/* Each check row behaves like a normal field row */
.check {
  display: grid !important;
  grid-template-columns: var(--sub-label-col) 1fr;
  align-items: stretch;
  min-height: var(--sub-row-min-h);
}

/* Controls fill the row height; all same height (inputs & checkboxes) */
.field-input,
.check-box {
  height: 100%;
  min-height: var(--sub-row-min-h);
  box-sizing: border-box;
}

/* Keep checkbox a nice square inside its cell */
.check-box {
  width: var(--sub-row-min-h);
  justify-self: flex-start;
}

/* Buttons pinned to the bottom, bottoms aligned with summary bottom */
.actions {
  margin-top: auto !important;   /* pushes actions to bottom of right column */
  width: 100%;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.btn {
  width: 100%;
  height: 52px;
}

/* === Responsive behavior: stack on small screens, keep everything inside modal === */
@media (max-width: 980px) {
  .submodal-grid {
    grid-template-columns: 1fr;
    overflow: auto;           /* internal scroll instead of page overflow */
  }

  .sub-left,
  .sub-right {
    padding: 24px;
  }

  /* On stacked layout we don’t need cover-top alignment offset */
  .sub-right {
    padding-top: 16px !important;
  }

  /* Let rows shrink naturally on smaller screens */
  .sub-right > .field,
  .sub-right > .checks-row {
    flex: 0 0 auto;
  }
}

/* === Exact-fit, no scroll, always aligned === */
:root{
  --sub-col-pad-top: 28px;
  --sub-col-pad-x: 32px;
  --sub-col-pad-bottom: 24px;
  --sub-chip-h: 44px;
  --sub-chip-gap: 16px;

  /* label column shrinks on narrower screens */
  --label-col: clamp(120px, 20vw, 220px);

  /* buttons can compress on short screens */
  --btn-h: clamp(32px, 4.5vh, 44px);

  /* vertical gap between rows on the right */
  --row-gap: 6px;
}

/* Modal is fixed height; columns fill it */
.submodal { height: 90vh; max-height: 90vh; overflow: hidden; }
.submodal-grid { height: 100%; padding: 0 !important; }

/* Columns share padding */
.sub-left, .sub-right{
  padding: var(--sub-col-pad-top) var(--sub-col-pad-x) var(--sub-col-pad-bottom) var(--sub-col-pad-x);
  box-sizing: border-box;
  min-height: 0;
}

/* Left column: chip + covers + summary fills height */
.sub-left{ display: grid; grid-template-rows: auto auto 1fr; row-gap: 16px; }
.chip-title{ min-height: var(--sub-chip-h); display: inline-flex; align-items: center; }
.summary-block{ display: grid; grid-template-rows: auto 1fr; min-height: 0; }
.summary-input{ height: 100%; min-height: 0; }

/* Right column: two areas:
   1) .sub-right-rows (all 10 rows) fills available space above
   2) .actions sits at bottom with height --btn-h
   Title aligns to covers by offsetting top padding */
.sub-right{
  display: grid !important;
  grid-template-rows: 1fr var(--btn-h);  /* rows area + buttons area */
  min-height: 0; min-width: 0;
  padding-top: calc(var(--sub-col-pad-top) + var(--sub-chip-h) + var(--sub-chip-gap)) !important;
}

/* Rows area: EXACT FIT
   We have 10 rows (8 fields + 2 checks). Make them equal height: 1fr each.
   Total height for rows = (right column height - --btn-h - total gaps) */
.sub-right-rows{
  min-height: 0;
  display: grid;
  grid-auto-rows: 1fr;                    /* each row gets equal share */
  row-gap: var(--row-gap);
  /* prevent overflow by reducing internal padding and font if needed */
}

/* Turn the checks container into TWO rows (so total = 10 rows) */
.checks-row{
  display: grid !important;
  grid-template-rows: 1fr 1fr;  /* NSFW row + Allow comments row */
  row-gap: var(--row-gap);
}

/* Every row (field and each check row): label | control */
.field,
.check{
  display: grid !important;
  grid-template-columns: var(--label-col) 1fr;
  align-items: stretch;
  min-width: 0;
}

/* Controls fill their row; shrink with the row height */
.field-input,
.check-box{
  height: 100%;
  min-height: 0;
  box-sizing: border-box;
  padding: 0 10px;
  line-height: 1.1;
  font-size: clamp(10px, 1.6vh, 14px);  /* tightens on short screens */
}

/* Checkbox square tracks row height visually */
.check-box{
  width: 100%;
  max-width: 44px;                 /* upper bound on large screens */
  aspect-ratio: 1 / 1;
  justify-self: start;
}

/* Buttons pinned to bottom; their total height is --btn-h */
.actions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-self: stretch;
}
.btn{
  height: 100%;
  font-size: clamp(11px, 1.6vh, 14px);
  font-weight: 800;
}

/* Safety: nothing can force horizontal overflow */
.sub-right, .sub-right-rows, .field, .check{ min-width: 0; }
.field-input{ width: 100%; max-width: 100%; min-width: 0; }

/* Keep borders/ outlines removed as requested */
.field-input, .field-input:focus, .field-input:focus-visible,
.summary-input, .summary-input:focus, .summary-input:focus-visible,
.cover-box, .cover-box:focus, .cover-box:focus-visible{
  border: none !important;
  outline: none !important;
}

/* Stacked on small width: same math still applies per column */
@media (max-width: 980px){
  .submodal-grid{ grid-template-columns: 1fr; }
  .sub-left, .sub-right{ padding: 24px; }
  .sub-right{ padding-top: 16px !important; }
}

/* === Make ALL rows the same height (fields, checks, buttons) === */

/* Right column: 11 equal rows:
   8 fields + 2 checks + 1 buttons row = 11 */
.sub-right{
  /* keep the cover-top alignment offset */
  padding-top: calc(
    var(--sub-col-pad-top, 28px) + var(--sub-chip-h, 44px) + var(--sub-chip-gap, 16px)
  ) !important;

  --rows: 11;                 /* total rows, all equal height */
  --row-gap: 6px;

  display: grid !important;
  grid-template-rows: repeat(var(--rows), 1fr);  /* all rows equal */
  row-gap: var(--row-gap);
  min-height: 0;
  min-width: 0;
  overflow: hidden;
}

/* Flatten wrappers so each inner item occupies a grid row */
.sub-right-rows{ display: contents !important; }

/* Split the checks container into TWO rows (so they count as 2 lines) */
.checks-row{
  display: contents !important;
}

/* Each row (fields and each check row) = label | control */
.field,
.check{
  display: grid !important;
  grid-template-columns: var(--label-col, clamp(120px, 20vw, 220px)) 1fr;
  align-items: stretch;
  min-width: 0;
}

/* Controls fill their row height */
.field-input,
.check-box{
  height: 100% !important;
  min-height: 0 !important;
  box-sizing: border-box;
  padding: 0 10px;
  line-height: 1.1;
  font-size: clamp(11px, 1.6vh, 14px);
}

/* Checkbox stays a square matching the row height */
.check-box{
  aspect-ratio: 1 / 1;
  width: auto;                /* width derives from height via aspect-ratio */
  justify-self: start;
}

/* Buttons occupy ONE equal-height row (like any other line) */
.actions{
  display: grid !important;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-self: stretch;        /* fill the row */
}
.btn{
  height: 100% !important;    /* match row height */
  width: 100%;
  font-size: clamp(11px, 1.6vh, 14px);
  font-weight: 800;
}

/* Safety: no horizontal overflow */
.sub-right, .field, .check{ min-width: 0; }
.field-input{ width: 100%; max-width: 100%; min-width: 0; }

/* === FORCE every line (fields, each check, and the buttons row) to same height === */

/* 1) Make the right column auto-place each direct item as one equal-height row */
.sub-right{
  /* keep your alignment offset */
  padding-top: calc(
    var(--sub-col-pad-top, 28px) + var(--sub-chip-h, 44px) + var(--sub-chip-gap, 16px)
  ) !important;

  /* every item becomes one row of equal height */
  display: grid !important;
  grid-auto-flow: row;
  grid-auto-rows: 1fr;      /* <- every row same height */
  row-gap: var(--row-gap, 6px);

  min-width: 0; min-height: 0; overflow: hidden;
}

/* 2) Flatten wrappers so each inner line is a direct grid item (gets 1fr) */
.sub-right-rows{ display: contents !important; }  /* fields container disappears */
.checks-row{ display: contents !important; }      /* each Check becomes its own row */

/* 3) Each "line" (field + each check) = label | control and stretches fully */
.field,
.check{
  display: grid !important;
  grid-template-columns: var(--label-col, clamp(120px, 20vw, 220px)) 1fr;
  align-items: stretch;
  min-width: 0; min-height: 0;
}

/* Controls fill the full row height */
.field-input,
.check-box{
  height: 100% !important;
  min-height: 0 !important;
  box-sizing: border-box;
  padding: 0 10px;
  line-height: 1.1;
  font-size: clamp(11px, 1.6vh, 14px);
}

/* Checkbox stays square to the row height */
.check-box{
  aspect-ratio: 1 / 1;
  width: auto;
  justify-self: start;
}

/* 4) Make the BUTTONS ROW itself one equal-height row, not shorter */
.actions{
  /* treat the whole actions block as ONE grid row with 1fr height */
  display: grid !important;
  grid-template-columns: 1fr 1fr;
  gap: 12px;

  align-self: stretch;      /* fill the row height */
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Buttons fill that row completely */
.btn{
  height: 100% !important;  /* exact same row height as other lines */
  min-height: 0 !important;
  width: 100%;
  margin: 0 !important;
  padding: 0 10px !important;
  line-height: 1.1;
  font-size: clamp(11px, 1.6vh, 14px);
  font-weight: 800;
}

/* Safety: nothing can force horizontal expansion */
.sub-right, .field, .check{ min-width: 0; }
.field-input{ width: 100%; max-width: 100%; min-width: 0; }

/* Kill the light gray border/outline on the tick boxes */
.check-box {
  appearance: none;
  -webkit-appearance: none;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Keep it off in all interaction states too */
.check-box:focus,
.check-box:focus-visible,
.check-box:hover,
.check-box:active {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* — Tighten the gap between columns — */
.submodal-grid {
  column-gap: 4px !important;   /* set to 0px if you want them touching */
}

/* Trim only the inner edges so outer margins stay comfy */
.sub-left  { padding-right: 8px !important; }
.sub-right { padding-left:  8px !important; }

/* Keep the existing top offset on the right column */
.sub-right{
  padding-top: calc(
    var(--sub-col-pad-top, 28px) + var(--sub-chip-h, 44px) + var(--sub-chip-gap, 16px)
  ) !important;
}

/* --- Right-column label alignment: centered vertically, left-aligned text --- */
.field-label,
.check-label {
  display: flex !important;
  align-items: center !important;      /* vertical center */
  justify-content: flex-start !important; /* left side of the label cell */
  text-align: left !important;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 0 12px !important;          /* keep a little left/right breathing room */
  white-space: nowrap;                  /* prevent multi-line wrap */
  overflow: hidden;
  text-overflow: ellipsis;              /* truncate long labels cleanly */
}

/* === Dynamic typography that grows to fill, never breaks the layout === */

/* A single variable to control size across the right column */
.sub-right{
  /* scales with the smaller of vw/vh, clamped for readability */
  --dyn-fs: clamp(11px, min(1.9vw, 2.2vh), 16px);
}

/* Labels (Title, Author, …) and the two checks */
.field-label,
.check-label{
  font-size: var(--dyn-fs) !important;
  line-height: 1 !important;            /* don't expand the row */
  padding-left: 12px !important;
  padding-right: 12px !important;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Inputs match the row height but text scales dynamically */
.field-input{
  font-size: var(--dyn-fs) !important;
  line-height: 1.1 !important;          /* tiny extra breathing room */
  padding-left: 10px !important;
  padding-right: 10px !important;
  white-space: nowrap;                   /* avoid wrapping that could grow height */
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Buttons scale the same way and still fill their row */
.actions .btn{
  font-size: var(--dyn-fs) !important;
  line-height: 1.1 !important;
  padding: 0 10px !important;
}

/* (Optional) Summary label + textarea text scale too */
.summary-label,
.summary-input{
  font-size: var(--dyn-fs) !important;
  line-height: 1.25 !important;         /* comfortable multi-line reading */
}

/* Field input wrapper so we can show a date placeholder overlay */
.field-control {
  position: relative;
  min-width: 0;
}

/* Overlay placeholder for date inputs (since native date ignores placeholder) */
.date-placeholder {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  padding: 0 10px;
  pointer-events: none;
  opacity: 0.7;
  /* tie into your dynamic type var if present */
  font-size: var(--dyn-fs, 13px);
  line-height: 1.1;
  color: #bdbdbd; /* muted */
}

/* Hide the overlay once focused or when a value exists */
.field-control:has(.field-input:focus) .date-placeholder {
  opacity: 0.35;
}

/* === Restore blinking caret in modal inputs/textarea (no borders/outlines) === */
.field-input,
.summary-input {
  color: var(--ink, #fff) !important;          /* ensure visible text */
  caret-color: var(--ink, #fff) !important;    /* bring back the blinking line */
  -webkit-text-fill-color: currentColor;       /* Safari/iOS consistency */
  pointer-events: auto;                        /* ensure focusable/clickable */
  opacity: 1;                                  /* avoid accidental dimming */
}

/* Keep border/outline removed as before */
.field-input:focus,
.field-input:focus-visible,
.summary-input:focus,
.summary-input:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  border: none !important;
}

/* ===============================
   Simple, bulletproof Genre UI
   =============================== */
.submodal [class^="genre-simple"],
.submodal [class*=" genre-simple"] {
  font: inherit;
  color: #fff;
  -webkit-text-fill-color: #fff;
  text-shadow: none;
  mix-blend-mode: normal;
  filter: none;
}

/* Container anchors the popover */
.submodal .genre-simple-control {
  position: relative;
  min-width: 0;
}

/* Display (button in the field area) */
.submodal .genre-simple-display {
  width: 100%;
  height: 100%;
  min-height: 40px;
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 8px;
  background: #111;
  color: #fff;
  border: none;
  outline: none;
  padding: 0 12px;
  text-align: left;
  cursor: pointer;
}
.submodal .genre-simple-display.is-placeholder .genre-simple-text {
  color: #bdbdbd;
  -webkit-text-fill-color: #bdbdbd;
  opacity: 0.9;
}
.submodal .genre-simple-caret { opacity: 0.9; }

/* Popover */
.submodal .genre-simple-popover {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  z-index: 10000;
  min-width: 260px;
  max-height: 260px;
  overflow: auto;
  background: #1d1d1d;
  color: #fff;
  border: 1px solid rgba(255,255,255,.15);
  box-shadow: 0 10px 28px rgba(0,0,0,.45);
}

/* List + items */
.submodal .genre-simple-list {
  list-style: none;
  margin: 0;
  padding: 6px 0;
}
.submodal .genre-simple-item {
  width: 100%;
  display: block;
  background: transparent;
  color: #fff;
  text-align: left;
  border: 0;
  padding: 10px 12px;
  cursor: pointer;
  white-space: nowrap;
}
.submodal .genre-simple-item:hover {
  background: #242424;
}
.submodal .genre-simple-item.is-selected {
  background: #1e88e5;
  color: #fff;
}
.submodal .genre-simple-item.is-disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

/* Name text — never disappear */
.submodal .genre-simple-name {
  display: inline-block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: inherit; /* follows item color */
  -webkit-text-fill-color: currentColor;
}

/* Hint line for multi-select */
.submodal .genre-simple-hint {
  padding: 8px 12px;
  font-size: 0.92em;
  color: rgba(255,255,255,0.8);
  border-top: 1px solid rgba(255,255,255,.12);
}

/* Ensure popover can escape clipping */
.submodal, .submodal-grid, .sub-right, .genre-simple-control { overflow: visible; }

/* Dark scrollbars for genre dropdowns */
.submodal .genre-pop,
.submodal .genre-list {
  scrollbar-color: #4a4a4a #1a1a1a; /* thumb, track (Firefox) */
  scrollbar-width: thin;            /* Firefox */
}

/* WebKit (Chrome/Edge/Safari) */
.submodal .genre-pop::-webkit-scrollbar,
.submodal .genre-list::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

.submodal .genre-pop::-webkit-scrollbar-track,
.submodal .genre-list::-webkit-scrollbar-track {
  background: #1a1a1a;
}

.submodal .genre-pop::-webkit-scrollbar-thumb,
.submodal .genre-list::-webkit-scrollbar-thumb {
  background: #4a4a4a;
  border-radius: 8px;
  border: 2px solid #1a1a1a; /* creates a gap look */
}

.submodal .genre-pop::-webkit-scrollbar-thumb:hover,
.submodal .genre-list::-webkit-scrollbar-thumb:hover {
  background: #5a5a5a;
}








/* --- Per-row label colors (override inline styles) --- */
.sub-right .sub-right-rows > :nth-child(1) .field-label {  /* Title */
  background: #fc5f2e !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(2) .field-label {  /* Author */
  background: #d81b60 !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(3) .field-label {  /* Date */
  background: #6a1b9a !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(4) .field-label {  /* Main Genre */
  background: #1e88e5 !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(5) .field-label {  /* Sub-Genres */
  background: #fc5f2e !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(6) .field-label {  /* Language */
  background: #d81b60 !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(7) .field-label {  /* ISBN */
  background: #6a1b9a !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(8) .field-label {  /* Copyright */
  background: #1e88e5 !important;
  color: #ffffff !important;
}
.sub-right .sub-right-rows > :nth-child(9) .field-label {  /* Dedication */
  background: #fc5f2e !important;
  color: #ffffff !important;
}
/* NSFW (10th row is a .check) */
.sub-right .sub-right-rows > :nth-child(10) .check-label {
  background: #d81b60 !important;
  color: #ffffff !important;
}

/* New Project chip */
.chip-title {
  background: #1e88e5 !important;
  color: #ffffff !important;
}

/* Buttons (with hover/focus just in case) */
.btn.cancel {
  background: #e53935 !important;
  color: #ffffff !important;
  border: none !important;
}
.btn.cancel:hover,
.btn.cancel:focus { filter: brightness(1.05); }

.btn.save {
  background: #43a047 !important;
  color: #ffffff !important;
  border: none !important;
}
.btn.save:hover,
.btn.save:focus { filter: brightness(1.05); }


/* === Bigger typography knobs === */
.submodal .sub-right { --RC-FS: 23px; }   /* right column font size */
.submodal .sub-left  { --LC-FS: 23px; }   /* left column (chip + summary) */

/* RIGHT column (already bigger from before, kept here for completeness) */
.submodal .sub-right .field-label,
.submodal .sub-right .check-label,
.submodal .sub-right .field-input,
.submodal .sub-right .genre-trigger,
.submodal .sub-right .label-info-btn,
.submodal .sub-right .actions .btn{
  font-size: var(--RC-FS) !important;
  line-height: 1 !important;
}
.submodal .sub-right .field-input::placeholder{ font-size: var(--RC-FS) !important; opacity:.7; }
.submodal .sub-right input[type="date"]::-webkit-datetime-edit{ font-size: var(--RC-FS) !important; }
.submodal .sub-right input[type="date"]::-webkit-calendar-picker-indicator{ transform: scale(1.15); }
.submodal .sub-right .genre-pop,
.submodal .sub-right .genre-pop .genre-opt,
.submodal .sub-right .genre-pop .genre-hint{
  font-size: calc(var(--RC-FS) * 0.95) !important; line-height: 1.1 !important;
}
.submodal .sub-right .field-input,
.submodal .sub-right .genre-trigger,
.submodal .sub-right .actions .btn{
  padding-top:0 !important; padding-bottom:0 !important;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* LEFT column: "New Project" chip + Summary */
.submodal .chip-title{
  font-size: var(--LC-FS) !important;
  line-height: 1 !important;
}

.submodal .summary-label{
  font-size: var(--LC-FS) !important;
  line-height: 1 !important;
}

.submodal .summary-input{
  font-size: calc(var(--LC-FS) * 0.95) !important;  /* readable but compact */
  line-height: 1.25 !important;                     /* keep paragraphs comfy */
}

/* Optional: placeholder in summary */
.submodal .summary-input::placeholder{
  font-size: calc(var(--LC-FS) * 0.95) !important;
  opacity: .7;
}

/* Dark scrollbar for the Summary textarea */
.submodal .summary-input{
  /* Firefox */
  scrollbar-color: #4a4a4a #121212; /* thumb, track */
  scrollbar-width: thin;
}

/* WebKit (Chrome/Edge/Safari) */
.submodal .summary-input::-webkit-scrollbar{
  width: 10px;
  height: 10px;
}
.submodal .summary-input::-webkit-scrollbar-track{
  background: #121212;
}
.submodal .summary-input::-webkit-scrollbar-thumb{
  background: #4a4a4a;
  border-radius: 8px;
  border: 2px solid #121212; /* creates the gap effect */
}
.submodal .summary-input::-webkit-scrollbar-thumb:hover{
  background: #5a5a5a;
}

/* Make the NSFW checkbox tick white */
.submodal .check-tick{
  color: #fff !important;   /* override the amber */
}

/* Fainter placeholder look for select-like fields (Genre, Sub-Genres, Language) */
.genre-trigger .fi-placeholder {
  color: var(--muted, #bdbdbd);
  -webkit-text-fill-color: var(--muted, #bdbdbd);
  opacity: 0.52;           /* faint */
}

/* Also dim the caret when it's a placeholder */
.genre-trigger .fi-placeholder + .fi-caret {
  opacity: 0.45;
}

/* Make native input placeholders faint (text fields) */
.field-input::placeholder {
  color: var(--muted, #bdbdbd);
  opacity: 0.5;
}

/* Date overlay placeholder even fainter to match */
.date-placeholder {
  color: var(--muted, #bdbdbd) !important;
  opacity: 0.5 !important;
}

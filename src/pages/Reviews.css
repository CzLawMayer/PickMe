/* src/pages/Reviews.css */
@import "./Library.css";

/* Keep tab 4 (Reviews) purple on the /reviews page */
.reviews-page .lib-tabs .lib-tab:nth-child(4)[aria-current="page"] {
  background: var(--bar4) !important;
  border-color: transparent !important;
  color: #fff !important;
}

/* Make review cards stack: big cover (full width) + info below */
.reviews-page .lib-card.lib-card--review {
  display: block !important;
  height: auto !important;
  min-width: 0 !important;
  grid-template-columns: none !important;
  overflow: visible !important;
  --rows: initial;
  --row-gap: 10px;
}

/* super-wide cover: use the whole column width */
.reviews-page .lib-card.lib-card--review .lib-cover {
  width: 100% !important;
  height: auto !important;
  aspect-ratio: 3 / 4;
  border-radius: 12px !important;
  overflow: hidden !important;
  background: #111;
}
.reviews-page .lib-card.lib-card--review .lib-cover img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

/* info BELOW the cover, as a regular vertical stack */
.reviews-page .lib-card.lib-card--review .lib-details.review-details {
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  margin-top: 10px !important;
  height: auto !important;
  min-height: 0 !important;
  overflow: visible !important;
}

/* keep details clean and compact */
.reviews-page .lib-card.lib-card--review .lib-details.review-details .lib-line {
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
  background: transparent !important;
  border-radius: 0 !important;
}

/* nicer sizing for this layout */
.reviews-page .lib-card.lib-card--review .lib-title-line {
  font-size: clamp(16px, 1.6vw, 20px) !important;
  font-weight: 800 !important;
  line-height: 1.2 !important;
  white-space: normal !important;
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 2 !important;
  -webkit-box-orient: vertical !important;
}
.reviews-page .lib-card.lib-card--review .lib-year-line {
  font-size: 13px !important;
  line-height: 1.2 !important;
  opacity: 0.9 !important;
}
.reviews-page .lib-card.lib-card--review .lib-author-line {
  font-size: 14px !important;
  line-height: 1.3 !important;
  color: rgba(255,255,255,0.8) !important;
}

/* actions spacing under title/author */
.reviews-page .lib-card.lib-card--review .lib-row-actions.is-inline {
  margin-top: 6px !important;
  gap: 8px !important;
}

/* user stars / genre rows stay compact */
.reviews-page .lib-card.lib-card--review .user-stars-row { margin-top: 0 !important; }
.reviews-page .lib-card.lib-card--review .lib-genre-row { margin-top: 2px !important; }

/* keep the blue selection outline behavior */
.reviews-page .lib-card.lib-card--review .lib-cover.is-selected::after {
  content: "";
  position: absolute;
  inset: 0;
  border: 2px solid var(--accent-blue, #3af);
  pointer-events: none;
}

/* super-wide cover: use the whole column width (no rounded edges) */
.reviews-page .lib-card.lib-card--review .lib-cover {
  width: 100% !important;
  height: auto !important;
  aspect-ratio: 3 / 4;
  border-radius: 0 !important;
  overflow: hidden !important;
  background: #111;
}
.reviews-page .lib-card.lib-card--review .lib-cover img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
  border-radius: 0 !important;
}

/* Review text lines */
.reviews-page .review-snippet {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.reviews-page .review-line {
  font-size: 14px;
  line-height: 1.35;
  opacity: 0.95;
}

/* Space between lines */
.reviews-page .review-snippet { gap: 8px; }
.reviews-page .review-line + .review-line { margin-top: 8px; }

/* Remove bullets/dots */
.reviews-page .review-overlay .review-snippet,
.reviews-page .review-overlay .review-line {
  list-style: none;
  padding-left: 0;
  margin-left: 0;
}
.reviews-page .review-overlay .review-line::before { content: none !important; }

/* Put review overlay content at the TOP of the card */
.reviews-page .lib-card.lib-card--review .review-overlay {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  padding-top: 12px;
  padding-bottom: 24px;
}
.reviews-page .lib-card.lib-card--review .review-overlay-inner {
  position: relative;
  top: 0;
  margin-top: 0;
}
.reviews-page .lib-card.lib-card--review .review-title { margin: 0 0 8px 0; }
.reviews-page .lib-card.lib-card--review .review-snippet { gap: 8px; }

/* Avatar + stars row inside overlay */
.reviews-page .lib-card.lib-card--review .review-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 6px 0 8px;
}
.reviews-page .lib-card.lib-card--review .user-rating-avatar {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  overflow: hidden;
  display: inline-block;
  flex: 0 0 auto;
}
.reviews-page .lib-card.lib-card--review .user-rating-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Divider between meta and review text */
.reviews-page .lib-card.lib-card--review .review-divider {
  width: 100%;
  height: 1px;
  background: rgba(255, 255, 255, 0.28);
  margin: 8px 0 8px;
}

/* Hide bottom “your stars” row in review cards */
.reviews-page .lib-card.lib-card--review .user-stars-row { display: none; }

/* Overlay fills the cover; show on hover/selected */
.reviews-page .lib-card.lib-card--review .review-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.82);
  opacity: 0;
  transition: opacity 160ms ease;
  z-index: 2;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  padding: 12px 12px 24px;
}
.reviews-page .lib-card.lib-card--review .lib-cover:hover .review-overlay,
.reviews-page .lib-card.lib-card--review .lib-cover.is-selected .review-overlay {
  opacity: 1;
}

/* Title at top in overlay */
.reviews-page .lib-card.lib-card--review .review-title {
  font-weight: 700;
  font-size: 16px;
  line-height: 1.2;
  margin: 0 0 6px 0;
  color: #fff;
  text-wrap: balance;
}

/* Avatar + stars sizing in overlay */
.reviews-page .lib-card.lib-card--review .review-meta { gap: 8px; margin: 6px 0 8px; }
.reviews-page .lib-card.lib-card--review .user-rating-avatar { width: 20px; height: 20px; }
.reviews-page .lib-card.lib-card--review .user-rating-avatar img { width: 100%; height: 100%; object-fit: cover; }

/* Divider */
.reviews-page .lib-card.lib-card--review .review-divider {
  width: 100%;
  height: 1px;
  background: rgba(255,255,255,0.28);
  margin: 8px 0;
}

/* Review lines (no bullets, spacing) */
.reviews-page .lib-card.lib-card--review .review-snippet {
  display: flex;
  flex-direction: column;
  gap: 8px;
  color: #f5f5f5;
}
.reviews-page .lib-card.lib-card--review .review-snippet .review-line {
  margin: 0;
  padding: 0;
  list-style: none;
}

/* Ensure bottom stars never show */
.reviews-page .lib-card.lib-card--review .lib-details .user-stars-row { display: none !important; }

/* Make all text in the overlay white by default */
.reviews-page .lib-card.lib-card--review .review-overlay { color: #fff; }

/* Force star glyphs to white baseline, then yellow for filled below */
.reviews-page .lib-card.lib-card--review .review-meta .user-stars-wrap .user-star {
  color: #fff !important;
}
.reviews-page .lib-card.lib-card--review .review-meta .user-stars-wrap .user-star { font-size: 18px; line-height: 1; }

/* Keep avatar bright */
.reviews-page .review-overlay .user-rating-avatar img { filter: none !important; opacity: 1 !important; }

/* 1) Only dim cover image; never overlay content */
.reviews-page .lib-card:hover .lib-cover > img:first-child { filter: brightness(0.3) !important; }
.reviews-page .lib-card:hover .lib-cover { filter: none !important; }

/* 3) Star colors inside overlay */
.reviews-page .review-overlay .user-stars-wrap .user-star.star-filled { color: #ffd54a !important; }
.reviews-page .review-overlay .user-stars-wrap .user-star.star-empty { color: rgba(255,255,255,0.35) !important; }

/* Keep overlay content bright and on top */
.reviews-page .review-overlay { mix-blend-mode: normal !important; filter: none !important; color: #fff; }
.reviews-page .review-overlay .review-title,
.reviews-page .review-overlay .review-meta,
.reviews-page .review-overlay .review-snippet { position: relative; z-index: 2; }

/* ---------- Overlay state logic (scoped) ---------- */
.reviews-page .lib-card .lib-cover .review-overlay {
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease, background-color .18s ease;
  background: rgba(0, 0, 0, 0);
}
.reviews-page .lib-card:hover .lib-cover .review-overlay {
  opacity: 1 !important;
  background: rgba(0, 0, 0, 1) !important;
  pointer-events: auto;
}
.reviews-page .lib-cover.is-selected .review-overlay {
  opacity: 1 !important;
  background: rgba(0, 0, 0, 0.8) !important;
  pointer-events: auto;
}
.reviews-page .lib-card:hover .lib-cover.is-selected .review-overlay {
  background: rgba(0, 0, 0, 1) !important;
}

/* Make sure the cover image itself never dims; the overlay does the work */
.reviews-page .lib-card .lib-cover > img:first-child { filter: none !important; }

/* Pull title and meta closer / tidy spacing */
.reviews-page .review-overlay .review-title { margin-bottom: 2px; line-height: 1.12; }
.reviews-page .review-overlay .review-meta { margin-top: 0; gap: 6px; }
.reviews-page .review-overlay .user-stars-wrap { margin-left: 4px; }
.reviews-page .review-overlay .review-divider { margin: 8px 0 10px; }
.reviews-page .review-overlay-inner { padding: 14px; }

/* Ensure the cover is the positioning context */
.reviews-page .lib-cover { position: relative; overflow: hidden; }
.reviews-page .review-overlay {
  position: absolute; inset: 0; display: flex; pointer-events: none;
}
.reviews-page .review-overlay-inner {
  pointer-events: auto;
  display: flex; flex-direction: column;
  width: 100%; height: 100%;
  padding: 14px 14px 12px; box-sizing: border-box; color: #fff;
}

/* Black on hover; dim when selected (scoped) */
.reviews-page .lib-card:hover .review-overlay-inner { background: rgba(0, 0, 0, 1); }
.reviews-page .lib-card.is-selected:not(:hover) .review-overlay-inner { background: rgba(0, 0, 0, 0.90); }

/* Header (fixed) */
.reviews-page .review-header { flex: 0 0 auto; }

/* Title, avatar, stars — final sizing */
.reviews-page .review-title {
  font-size: 18px; font-weight: 700; line-height: 1.15; margin: 0 0 6px 0;
}
.reviews-page .review-meta {
  display: flex; align-items: center; gap: 8px; margin: 0 0 8px 0;
}
.reviews-page .review-meta .user-rating-avatar {
  width: 28px; height: 28px; border-radius: 50%; overflow: hidden; flex: 0 0 auto;
}
.reviews-page .review-meta .user-rating-avatar img { width: 100%; height: 100%; object-fit: cover; opacity: 1; filter: none; }
.reviews-page .review-meta .user-stars-wrap .user-star.star-filled { color: #ffd54a; }

/* Divider */
.reviews-page .review-divider { height: 1px; background: rgba(255,255,255,0.35); margin: 6px 0 8px 0; }

/* Scrollable body */
.reviews-page .review-scroll {
  flex: 1 1 auto; overflow: auto; -webkit-overflow-scrolling: touch; padding-right: 6px;
}
/* Scrollbar */
.reviews-page .review-scroll::-webkit-scrollbar { width: 6px; }
.reviews-page .review-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.35); border-radius: 3px; }
.reviews-page .review-scroll::-webkit-scrollbar-track { background: transparent; }

/* Review lines */
.reviews-page .review-line { margin: 0 0 8px 0; line-height: 1.25; font-weight: 500; }

/* Make the cover a clipping context & image fill */
.reviews-page .lib-card .lib-cover { position: relative; overflow: hidden; }
.reviews-page .lib-card .lib-cover img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* Full-bleed overlay container */
.reviews-page .lib-card .review-overlay {
  position: absolute; inset: 0; z-index: 2; display: flex;
  align-items: flex-start; justify-content: flex-start;
  opacity: 0; background: rgba(0, 0, 0, 0);
  transition: opacity .2s ease, background .2s ease;
  pointer-events: none;
}
.reviews-page .lib-card .review-overlay-inner { width: 100%; padding: 16px 14px; }
.reviews-page .lib-card:hover .review-overlay { opacity: 1; background: rgba(0, 0, 0, 1); }
.reviews-page .lib-cover.is-selected:not(:hover) .review-overlay { opacity: 1; background: rgba(0, 0, 0, 0.92); }
.reviews-page .lib-cover.is-selected:hover .review-overlay { opacity: 1; background: rgba(0, 0, 0, 1); }

/* Darkening lives on the cover itself */
.reviews-page .lib-card .lib-cover::before {
  content: ""; position: absolute; inset: 0; background: #000; opacity: 0;
  transition: opacity .2s ease; pointer-events: none; z-index: 1;
}
.reviews-page .lib-card:hover .lib-cover::before { opacity: 1; }
.reviews-page .lib-card .lib-cover.is-selected::before { opacity: 0.85; }
.reviews-page .lib-card:hover .lib-cover.is-selected::before { opacity: 1; }

.reviews-page .lib-card .review-overlay,
.reviews-page .lib-card .review-overlay-inner { background: transparent !important; }

/* Title spacing & size in overlay */
.reviews-page .lib-card .review-overlay-inner .review-title {
  margin: 0 0 8px 0;
  font-size: clamp(20px, 2.6vw, 20px);
  font-weight: 800;
  line-height: 1.15;
  letter-spacing: 0.15px;
}

/* Slim, subtle scrollbar just inside the review text area */
.reviews-page .lib-card .review-overlay .review-snippet {
  padding-right: 8px;
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.35) transparent;
}
.reviews-page .lib-card .review-overlay .review-snippet::-webkit-scrollbar { width: 6px; }
.reviews-page .lib-card .review-overlay .review-snippet::-webkit-scrollbar-track { background: transparent; }
.reviews-page .lib-card .review-overlay .review-snippet::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.35); border-radius: 8px;
}
.reviews-page .lib-card .review-overlay .review-snippet::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.55);
}

/* FINAL OVERRIDE — REVIEW TEXT SIZE & SPACING */
.reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet,
.reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet .review-line {
  font-size: 15px !important;
  line-height: 1.5 !important;
}
.reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet .review-line {
  margin: 0 0 10px 0 !important;
}

/* Laptop tuning */
@media (max-width: 1440px) {
  .reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet,
  .reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet .review-line {
    font-size: 15px !important;
    line-height: 1.45 !important;
  }
}
@media (max-width: 1280px) {
  .reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet,
  .reviews-page .library-app .lib-card.lib-card--review .lib-cover .review-overlay .review-overlay-inner .review-snippet .review-line {
    font-size: 14.5px !important;
    line-height: 1.44 !important;
  }
}

/* ---- Force review stars to yellow (filled) / muted (empty) ---- */
.reviews-page .lib-card.lib-card--review .review-meta .user-stars-wrap .user-star.star-filled {
  color: #ffd54a !important;  /* yellow */
}

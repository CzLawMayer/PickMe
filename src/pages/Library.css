/* =========================
   Library.css (scoped)
   ========================= */

/* Page-local tokens (won’t affect other pages) */
.library-app {
  --ink: #fff;             /* text/icon color */
  --app-header-h: 64px;
  --pad-x: 28px;
  --icon-box: 40px;
  --icon-size: 22px;

  --hero-min-h: clamp(96px, 12vw, 168px);
  --hero-gap: clamp(12px, 2vw, 24px);
  --tab-h: clamp(36px, 4.2vw, 52px);
  --tab-radius: clamp(18px, 2.8vw, 28px);
}

/* ===== Page frame ===== */
.library-app {
  min-height: 100svh;
  color: var(--ink);
  display: flex;
  flex-direction: column;
}

/* ===== Header (parity with Profile/Home, scoped) ===== */
.library-app > .header {
  height: var(--app-header-h);
  padding: 0 var(--pad-x);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #000; /* only Library header is black */
  box-sizing: border-box;
  z-index: 900;
}

.header .logo {
  margin: 0;
  font-size: 28px;
  font-weight: 800;
  line-height: 1;
}
.header .logo .logo-link {
  display: inline-block;
  line-height: 1;
  color: inherit;
  text-decoration: none;
}

.header .header-icons {
  display: grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 12px;
}
.header .icon {
  display: inline-grid;
  place-items: center;
  width: var(--icon-box);
  height: var(--icon-box);
  font-size: var(--icon-size);
  background: transparent;
  border: 0;
  color: inherit;
  border-radius: 8px;
  cursor: pointer;
}

/* ===== Body layout (left content + right rail) ===== */
.library-layout {
  display: grid;
  grid-template-columns: 1fr 340px;
  min-height: calc(100svh - var(--app-header-h));
}

.library-left {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

/* ===== Top banner (identity + tabs) ===== */
.lib-hero {
  display: grid;
  grid-template-columns: minmax(320px, 560px) 1fr; /* identity | tabs */
  align-items: center;
  column-gap: var(--hero-gap);
  min-height: var(--hero-min-h);
  padding: clamp(10px, 1.4vw, 18px) var(--pad-x);
  background: #121212; /* subtle band */
  border-bottom: 1px solid rgba(255,255,255,.06);
}

/* Reuse Profile.css identity styles.
   Library-only avatar size (smaller, circular, NO border). */
.library-app .lib-hero .profile-avatar {
  width: 56px;
  height: 56px;
  border: 0;
  border-radius: 50%;
  overflow: hidden;
}
.library-app .lib-hero .profile-avatar > * {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Tabs */
.lib-tabs {
  align-self: stretch;
  display: flex;
  gap: clamp(10px, 1.6vw, 16px);
  align-items: center;
  flex-wrap: wrap;
}
.lib-tab {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: var(--tab-h);
  padding-inline: clamp(14px, calc(var(--tab-h) * 0.5), 28px);
  border-radius: var(--tab-radius);
  font-weight: 800;
  font-size: clamp(14px, calc(var(--tab-h) * 0.34), 18px);
  line-height: 1;
  background: #111;
  color: #fff;
  text-decoration: none;
  border: 1px solid rgba(255,255,255,.06);
  transition: transform 120ms ease, filter 120ms ease;
  cursor: pointer;
}
.lib-tab:hover { transform: translateY(-1px); filter: brightness(1.05); }
.lib-tab:active { transform: translateY(0); }
.lib-tab.is-active,
.lib-tab[aria-current="page"] {
  background: #ff4081;
  border-color: transparent;
  color: #fff;
}

/* Main content */
.lib-content {
  padding: 16px var(--pad-x);
}

/* Right rail (FeaturePanel) */
.library-feature {
  background: #000;               /* right strip only */
  display: flex;
  align-items: stretch;
  justify-content: center;
  padding: 0;                     /* edge-to-edge strip */
}
.library-feature .feature-card {
  width: 100%;
  height: 100%;
  max-width: none;
  background: #000;
  box-shadow: none;
}

/* SideMenu layering (if used) */
.menu-overlay { z-index: 950; }
.side-menu    { z-index: 960; }

/* ===== Responsive ===== */
@media (max-width: 820px) {
  .lib-hero {
    grid-template-columns: 1fr;
    row-gap: 12px;
  }
  .lib-tabs { justify-content: flex-start; }
}

/* Library-only: FORCE avatar size, perfect circle, no border */
.library-app .lib-hero .profile-card .profile-avatar {
  width: 100px !important;   /* <- change this number to your taste */
  height: 100px !important;
  border: 0 !important;
  border-radius: 50% !important;
  overflow: hidden;
  aspect-ratio: 1 / 1 !important; /* keeps it round even if something sets width/height differently */
}

.library-app .lib-hero .profile-card .profile-avatar img,
.library-app .lib-hero .profile-card .profile-avatar svg {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover;
}

/* Put identity and tabs on the same row, side-by-side */
.library-app .lib-hero {
  display: flex !important;          /* override previous grid */
  align-items: center;
  gap: 12px;                         /* space between identity and tabs */
  flex-wrap: nowrap;                 /* keep on one line */
}

/* Identity takes only what it needs; never stretches full width */
.library-app .lib-hero .identity-cell {
  flex: 0 1 auto;                    /* shrink-to-fit */
  min-width: 0;                      /* allow text to ellipsis */
}

/* Tabs sit directly to the right and use remaining space */
.library-app .lib-hero .lib-tabs {
  flex: 1 1 auto;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: clamp(8px, 1.4vw, 14px);
  flex-wrap: nowrap;                 /* never wrap */
  white-space: nowrap;               /* keep buttons on one line */
  min-width: 0;
  margin-left: 0 !important;         /* kill any previous left margin */
}

/* Make buttons bigger on wide screens, auto-shrink so they stay on one line */
.library-app .lib-hero .lib-tab {
  height: clamp(34px, 5.2vw, 56px);
  padding-inline: clamp(10px, 2.4vw, 26px);
  font-size: clamp(12px, 1.35vw, 18px);
  border-radius: clamp(16px, 3vw, 28px);
}

/* Tiny screens: compress a bit more so they never wrap */
@media (max-width: 420px) {
  .library-app .lib-hero .lib-tab {
    height: clamp(30px, 7vw, 40px);
    padding-inline: clamp(8px, 2vw, 16px);
    font-size: clamp(11px, 3.4vw, 14px);
  }
}

/* === FIX: keep full identity visible + tabs directly to the right === */

/* 1) Use grid again and reserve real width for identity */
.library-app .lib-hero {
  display: grid !important;
  /* identity column: never smaller than 340px, can grow to its content,
     tabs column uses the rest */
  grid-template-columns: minmax(340px, max-content) 1fr !important;
  align-items: center;
  column-gap: clamp(12px, 2vw, 18px);
}

/* 2) Identity block cannot collapse; allow text to measure properly */
.library-app .lib-hero .identity-cell {
  min-width: 340px;         /* matches min in grid-template-columns */
}

/* 3) Inside identity: avatar | text; ensure text column can grow */
.library-app .lib-hero .profile-card {
  display: grid;
  grid-template-columns: auto 1fr;  /* avatar | name/handle/bars */
  align-items: center;
  column-gap: clamp(10px, 1.6vw, 14px);
}

/* Don’t let the text column collapse to 0 */
.library-app .lib-hero .profile-id { min-width: 220px; }

/* Text should truncate nicely if needed (not vanish) */
.library-app .lib-hero .profile-name,
.library-app .lib-hero .profile-handle {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 4) Tabs: sit directly to the right, stay on one line, scale fluidly */
.library-app .lib-hero .lib-tabs {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: clamp(8px, 1.4vw, 14px);
  flex-wrap: nowrap;       /* never wrap */
  white-space: nowrap;     /* keep buttons on one line */
  min-width: 0;            /* allow them to shrink when space tight */
  margin-left: 0 !important;
}

/* Bigger on wide screens, auto-shrink so they don’t wrap */
.library-app .lib-hero .lib-tab {
  height: clamp(34px, 5.2vw, 56px);
  padding-inline: clamp(10px, 2.4vw, 26px);
  font-size: clamp(12px, 1.35vw, 18px);
  border-radius: clamp(16px, 3vw, 28px);
}

/* Very small screens: compress a bit more to stay on one line */
@media (max-width: 420px) {
  .library-app .lib-hero {
    grid-template-columns: minmax(300px, max-content) 1fr !important;
  }
  .library-app .lib-hero .identity-cell { min-width: 300px; }
  .library-app .lib-hero .profile-id { min-width: 200px; }
  .library-app .lib-hero .lib-tab {
    height: clamp(28px, 7vw, 40px);
    padding-inline: clamp(8px, 2vw, 16px);
    font-size: clamp(11px, 3.4vw, 14px);
  }
}

/* === FIX: restore full username block + tabs to the right === */

/* Use grid and reserve a real column for the identity block */
.library-app .lib-hero {
  display: grid !important;
  grid-template-columns: minmax(420px, auto) 1fr !important; /* identity | tabs */
  align-items: center;
  column-gap: 14px;
}

/* The identity wrapper must not collapse */
.library-app .lib-hero .identity-cell {
  min-width: 420px !important;   /* give name/handle/bars room */
  width: auto !important;
}

/* Inside identity: avatar | text; keep text column alive */
.library-app .lib-hero .profile-card {
  display: grid !important;
  grid-template-columns: auto 1fr !important; /* avatar | text */
  align-items: center;
  column-gap: 12px;
}
.library-app .lib-hero .profile-id {
  min-width: 0 !important;  /* allow natural width without collapsing */
}

/* Make sure text actually renders (no clipping/truncation) */
.library-app .lib-hero .profile-name,
.library-app .lib-hero .profile-handle {
  white-space: nowrap;
  overflow: visible;
  text-overflow: clip;
}

/* Tabs sit directly to the right, on one line, and scale down if needed */
.library-app .lib-hero .lib-tabs {
  display: flex !important;
  align-items: center;
  justify-content: flex-start;
  gap: clamp(8px, 1.4vw, 14px);
  flex-wrap: nowrap;     /* never wrap */
  white-space: nowrap;   /* keep in one line */
  min-width: 0;          /* allow shrinking when tight */
  margin-left: 0 !important;
}

.library-app .lib-hero .lib-tab {
  height: clamp(32px, 5vw, 56px);
  padding-inline: clamp(8px, 2.2vw, 26px);
  font-size: clamp(12px, 1.2vw, 18px);
  border-radius: clamp(14px, 2.6vw, 28px);
}

/* Small screens: compress buttons a touch so they still fit in one line */
@media (max-width: 420px) {
  .library-app .lib-hero {
    grid-template-columns: minmax(360px, auto) 1fr !important;
  }
  .library-app .lib-hero .identity-cell {
    min-width: 360px !important;
  }
  .library-app .lib-hero .lib-tab {
    height: clamp(28px, 7vw, 38px);
    padding-inline: clamp(6px, 1.8vw, 14px);
    font-size: clamp(11px, 3.4vw, 14px);
  }
}

/* === ENLARGE LIBRARY BUTTONS (Profile | Library | Read | Reviews) === */

.library-app .lib-hero .lib-tab {
  /* Make them bigger and more prominent */
  height: clamp(44px, 6vw, 68px);           /* taller buttons */
  padding-inline: clamp(20px, 3vw, 36px);   /* wider padding */
  font-size: clamp(15px, 1.6vw, 22px);      /* bigger text */
  border-radius: clamp(20px, 3.2vw, 34px);  /* slightly rounder */
  font-weight: 800;
  letter-spacing: 0.2px;
  transition: transform 120ms ease, filter 120ms ease;
}

/* Hover feedback (subtle lift and brightness) */
.library-app .lib-hero .lib-tab:hover {
  transform: translateY(-2px);
  filter: brightness(1.1);
}

/* Active tab — same pink but more presence */
.library-app .lib-hero .lib-tab.is-active,
.library-app .lib-hero .lib-tab[aria-current="page"] {
  background: #ff4081;
  color: #fff;
  border-color: transparent;
  filter: brightness(1.05);
}

/* On smaller screens, make them shrink just enough to stay in one line */
@media (max-width: 520px) {
  .library-app .lib-hero .lib-tab {
    height: clamp(36px, 8vw, 50px);
    padding-inline: clamp(12px, 2.4vw, 22px);
    font-size: clamp(13px, 3.2vw, 17px);
    border-radius: clamp(16px, 4vw, 26px);
  }
}

/* === More space between username section and buttons === */
.library-app .lib-hero .lib-tabs {
  margin-left: clamp(32px, 4vw, 100px);  /* noticeably larger gap */
}

/* Keep spacing moderate on smaller screens so they stay aligned */
@media (max-width: 600px) {
  .library-app .lib-hero .lib-tabs {
    margin-left: clamp(18px, 3vw, 36px);
  }
}

@media (max-width: 420px) {
  .library-app .lib-hero .lib-tabs {
    margin-left: clamp(10px, 2vw, 22px);
  }
}

/* Add more space between identity and buttons via column gap */
.library-app .lib-hero {
  column-gap: clamp(32px, 5vw, 65px) !important;
}

/* === Allow buttons to wrap when space is tight === */
.library-app .lib-hero {
  align-items: start; /* lets wrapped rows grow downward */
}

/* Let the buttons wrap to a new line inside the right column */
.library-app .lib-hero .lib-tabs {
  display: flex;
  flex-wrap: wrap !important;     /* override any nowrap */
  white-space: normal !important; /* allow wrapping */
  gap: 10px 12px;                 /* row-gap | column-gap */
  margin-left: clamp(24px, 3vw, 64px); /* keep some space from username */
  min-width: 0;
}

/* Make each button behave nicely when wrapping */
.library-app .lib-hero .lib-tab {
  flex: 0 1 auto;     /* shrink if needed, then wrap */
}

/* If the viewport gets really narrow, stack the buttons vertically. 
   This guarantees no overlap with the right Feature panel. */
@media (max-width: 780px) {
  .library-app .lib-hero {
    grid-template-columns: 1fr !important; /* identity on top, buttons below */
    row-gap: 12px;
  }
  .library-app .lib-hero .lib-tabs {
    margin-left: 0 !important;     /* no left margin when stacked under identity */
    flex-direction: column;         /* vertical stack */
    align-items: flex-start;
    gap: 10px;
  }
  .library-app .lib-hero .lib-tab {
    width: max-content;             /* keep a tidy pill width */
  }
}

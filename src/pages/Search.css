/* Scoped tweaks for Search page built on top of Reviews/Library layout */
.search-page .lib-tabs .lib-tab {
  cursor: pointer;
}

/* Highlight the active tab; reuse your bar colors but keep it neutral */
.search-page .lib-tabs .lib-tab.is-active {
  background: var(--bar2, #3949ab);
  color: #fff;
  border-color: transparent;
}

/* Remove the right-side feature column on this page */
.library-layout.library-layout--full {
  grid-template-columns: 1fr !important; /* just the left/content */
}

/* Slot where the identity widget lived: now it's a search field */
.search-identity-slot {
  min-width: 0;
  flex: 1 1 auto;
  display: flex;
  align-items: center;
}



/* 4 columns on Search (desktop) */
.search-page .search-books-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: var(--gap, clamp(16px, 2vw, 28px));
}

/* Keep single-column layout wrapper (no feature panel) */
.library-layout.library-layout--full {
  grid-template-columns: 1fr !important;
}

/* Use the review-style card look (cover full width, details below) */
.search-page .lib-card.lib-card--review {
  display: block !important;
  height: auto !important;
  min-width: 0 !important;
  grid-template-columns: none !important;
  overflow: visible !important;
}

/* Big cover taking full column width */
.search-page .lib-card.lib-card--review .lib-cover {
  position: relative;
  width: 100% !important;
  height: auto !important;
  aspect-ratio: 3 / 4;
  overflow: hidden !important;
  background: #111;
}
.search-page .lib-card.lib-card--review .lib-cover img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}

/* Details stack below the cover */
.search-page .lib-card.lib-card--review .lib-details.review-details {
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  margin-top: 10px !important;
  height: auto !important;
  min-height: 0 !important;
  overflow: visible !important;
}

/* Tidy type sizes (same as Reviews) */
.search-page .lib-card.lib-card--review .lib-title-line {
  font-size: clamp(16px, 1.6vw, 20px) !important;
  font-weight: 800 !important;
  line-height: 1.2 !important;
  white-space: normal !important;
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 2 !important;
  -webkit-box-orient: vertical !important;
}
.search-page .lib-card.lib-card--review .lib-year-line {
  font-size: 13px !important;
  line-height: 1.2 !important;
  opacity: 0.9 !important;
}
.search-page .lib-card.lib-card--review .lib-author-line {
  font-size: 14px !important;
  line-height: 1.3 !important;
  color: rgba(255,255,255,0.8) !important;
}
.search-page .lib-card.lib-card--review .lib-row-actions.is-inline {
  margin-top: 6px !important;
  gap: 8px !important;
}

/* Make sure any review overlay styles from Reviews are disabled here */
.search-page .lib-card.lib-card--review .review-overlay,
.search-page .lib-card.lib-card--review .review-overlay-inner,
.search-page .lib-card.lib-card--review .lib-cover::before {
  display: none !important;
  content: none !important;
  opacity: 0 !important;
  background: transparent !important;
  pointer-events: none !important;
}

/* Responsive: drop to 3 / 2 columns as needed */
@media (max-width: 1280px) {
  .search-page .search-books-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}
@media (max-width: 820px) {
  .search-page .search-books-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
@media (max-width: 520px) {
  .search-page .search-books-grid {
    grid-template-columns: 1fr;
  }
}

/* ---------- Remove any darkening/fade on Search ---------- */
.search-page .lib-card .lib-cover::before,
.search-page .lib-card .lib-cover .review-overlay,
.search-page .lib-card .lib-cover .review-overlay-inner {
  display: none !important;
  content: none !important;
  opacity: 0 !important;
  background: transparent !important;
  pointer-events: none !important;
}

/* Some global css may still try to dim the <img> on hover — undo it here */
.search-page .lib-card .lib-cover > img:first-child {
  filter: none !important;
  opacity: 1 !important;
}

/* Ensure the cover can animate smoothly */
.search-page .lib-card .lib-cover {
  transition: transform 180ms ease, box-shadow 180ms ease, outline-color 180ms ease;
  will-change: transform;
  outline: 0 solid transparent; /* used for focus ring below */
}






/* Kill outlines/borders on Search page cards & their interactive children */
.search-page .lib-card:focus,
.search-page .lib-card:focus-visible,
.search-page .lib-card:active,
.search-page .lib-card *:focus,
.search-page .lib-card *:focus-visible,
.search-page .lib-card *:active,
.search-page a:focus,
.search-page a:focus-visible,
.search-page button:focus,
.search-page button:focus-visible {
  outline: none !important;
  box-shadow: none !important;
}

/* Some global styles use :focus-within to draw a ring — neutralize it */
.search-page .lib-card:focus-within {
  outline: none !important;
  box-shadow: none !important;
}

/* If your theme draws a selection border on the cover via ::after */
.search-page .lib-card .lib-cover.is-selected::after,
.search-page .lib-card:focus-within .lib-cover::after,
.search-page .lib-card .lib-cover:focus::after,
.search-page .lib-card .lib-cover:focus-visible::after {
  display: none !important;
  content: none !important;
}

/* Anchor & button tap highlight (mobile) */
.search-page a,
.search-page button,
.search-page .meta-icon-btn {
  -webkit-tap-highlight-color: transparent;
}

/* If any border color is being set on focus, neutralize it */
.search-page .lib-card,
.search-page .lib-card .lib-cover,
.search-page .lib-card .meta-icon-btn {
  border-color: transparent !important;
}




/* No outlines/rings on icon buttons */
.search-page .meta-icon-btn:focus,
.search-page .meta-icon-btn:focus-visible,
.search-page .meta-icon-btn:active {
  outline: none !important;
  box-shadow: none !important;
  border-color: transparent !important;
}

/* Pop only when the COVER itself is hovered */
@media (hover: hover) and (pointer: fine) {
  .search-page .lib-card .lib-cover:hover {
    transform: translateY(-2px) scale(1.015);
    box-shadow: 0 8px 26px rgba(0,0,0,0.35), 0 2px 8px rgba(0,0,0,0.25);
  }
}

/* Ensure the cover keeps receiving pointer events */
.search-page .lib-card .lib-cover {
  pointer-events: auto;
  transition: transform 180ms ease, box-shadow 180ms ease;
}


/* Minimal underline search */
.search-page .search-underline {
  display: flex;
  align-items: center;
  gap: 10px;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

.search-page .search-underline .search-icon {
  font-size: 22px;
  line-height: 1;
  color: #fff;
  opacity: 0.95;
  user-select: none;
}

.search-page .search-input-underline {
  flex: 1 1 auto;
  background: transparent !important;
  border: none !important;
  border-bottom: 2px solid rgba(255,255,255,0.9) !important;
  color: #fff !important;
  padding: 6px 0 8px 0 !important;
  outline: none !important;
  font-size: 16px;
}

.search-page .search-input-underline::placeholder {
  color: rgba(255,255,255,0.6);
}

.search-page .search-input-underline:focus {
  border-bottom-color: #fff !important;
}



.search-page .search-input-underline {
  flex: 1 1 auto;
  background: transparent !important;
  border: none !important;
  border-bottom: 2px solid rgba(255,255,255,0.9) !important;
  color: #fff !important;
  padding: 6px 0 8px 0 !important;
  outline: none !important;
  font-size: 16px;
  caret-color: #fff;            /* <-- ensures the blinking cursor is visible */
}

.search-page .search-underline .search-icon {
  font-size: 32px;              /* was 22px */
  line-height: 1;
  color: #fff;
  opacity: 1;                   /* make it fully opaque */
  margin-right: 4px;
  user-select: none;
}

/* --- Force a visible caret + focus for the underline input --- */
.search-page input.search-input-underline {
  /* make sure it's a normal, focusable input */
  display: inline-block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;

  /* text + caret */
  color: #fff !important;
  -webkit-text-fill-color: #fff !important; /* Safari/WebKit */
  caret-color: #fff !important;

  /* our minimal look */
  background: transparent !important;
  border: none !important;
  border-bottom: 2px solid rgba(255,255,255,0.9) !important;
  padding: 6px 0 8px 0 !important;
  outline: none !important;
  font-size: 16px !important;
}

/* ensure nothing kills focus visuals on inputs globally for Search page */
.search-page input.search-input-underline:focus,
.search-page input.search-input-underline:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  border-bottom-color: #fff !important;
}

/* if any transform/filter on parents is messing with the caret, neutralize for this row */
.search-page .search-underline,
.search-page .search-underline * {
  transform: none !important;
  filter: none !important;
}

/* keep the bigger icon */
.search-page .search-underline .search-icon {
  font-size: 32px !important;
  line-height: 1 !important;
  color: #fff !important;
  opacity: 1 !important;
  margin-right: 6px !important;
  user-select: none !important;
}

/* Full-width, three-column hero:
   [ flexible search | centered tabs | tight filter ] */
.search-page .lib-hero-grid {
  display: grid;
  width: 100%;                           /* force full width */
  grid-template-columns: minmax(0,1fr) auto min-content; /* left flexes */
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
}

/* Center the tabs perfectly */
.search-page .lib-hero-grid .lib-tabs {
  justify-self: center;
  display: inline-flex;
  gap: 8px;
}

/* Left column may grow without clipping */
.search-page .lib-hero-grid .search-identity-slot {
  min-width: 0;                          /* crucial so the input can expand */
}

/* Make the underline search fill the whole left column */
.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: 100%;
}

/* Keep the filter pinned right */
.search-page .lib-hero-grid .lib-hero-cta {
  justify-self: end;
}

/* Responsive stacking */
@media (max-width: 720px) {
  .search-page .lib-hero-grid {
    grid-template-columns: minmax(0,1fr) min-content;
    grid-template-areas:
      "search  filter"
      "tabs    tabs";
    row-gap: 12px;
  }
  .search-page .lib-hero-grid .search-identity-slot { grid-area: search; }
  .search-page .lib-hero-grid .lib-tabs { grid-area: tabs; justify-self: center; }
  .search-page .lib-hero-grid .lib-hero-cta { grid-area: filter; justify-self: end; }
}

/* Let the input actually use the space */
.search-page .search-input-underline {
  width: 100%;
}

/* ====== Force the hero to span the entire available width ====== */
.search-page .lib-hero {
  width: 100vw !important;           /* take full viewport width */
  max-width: 100vw !important;
  margin-left: calc(50% - 50vw);     /* cancel any page horizontal padding */
  box-sizing: border-box;
}

/* Allow the hero grid to stretch inside it */
.search-page .lib-hero-grid {
  width: 100% !important;
  max-width: 100%;
  justify-content: space-between;
}

/* Keep left flexible, middle centered, right tight */
.search-page .lib-hero-grid {
  grid-template-columns: 1fr auto min-content;
}

/* Stretch the search underline fully within its cell */
.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: 100% !important;
  max-width: none !important;
}

/* Make the hero span the full row and let the left column actually grow */
.search-page .library-left {
  max-width: none !important;     /* kill any max-width clamp */
}

.search-page .lib-hero {
  width: 100% !important;         /* no viewport hack needed */
  max-width: none !important;
  margin-left: 0 !important;
  padding-left: var(--pad-x, 28px);
  padding-right: var(--pad-x, 28px);
}

/* Three-column grid: left fills all remaining space */
.search-page .lib-hero-grid {
  display: grid !important;
  grid-template-columns: minmax(0, 1fr) auto min-content !important;
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
  width: 100% !important;
  max-width: 100% !important;
}

/* Crucial: allow the left cell to expand and the control to fill it */
.search-page .lib-hero-grid .search-identity-slot {
  min-width: 0 !important;        /* prevents intrinsic shrink */
}

.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: 100% !important;         /* fill the whole left column */
  flex: 1 1 100% !important;      /* in case another rule makes it shrink */
  min-width: 0 !important;
}

/* The input itself must be full width too */
.search-page .search-input-underline {
  width: 100% !important;
}

/* Keep center buttons truly centered and filter pinned right */
.search-page .lib-hero-grid .lib-tabs { justify-self: center; }
.search-page .lib-hero-grid .lib-hero-cta { justify-self: end; }

/* If any container above imposes width, neutralize just for Search */
.search-page .library-layout,
.search-page .library-left > * {
  max-width: none !important;
}

/* --- Make the hero a single lane on Search so our inner grid can own the width --- */
.search-page .lib-hero {
  display: block !important;                 /* kill the base grid split */
  grid-template-columns: none !important;
  width: 100% !important;
  max-width: none !important;
}

/* If any parent still treats lib-hero as a grid, force children to span full width */
.search-page .lib-hero > * {
  grid-column: 1 / -1 !important;
  width: 100% !important;
}

/* Our three-zone row: [ expanding search | centered tabs | tight filter ] */
.search-page .lib-hero-grid {
  display: grid !important;
  grid-template-columns: minmax(0,1fr) auto min-content !important;
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
  width: 100% !important;
}

/* Let the left cell actually grow */
.search-page .lib-hero-grid .search-identity-slot { min-width: 0 !important; }
.search-page .lib-hero-grid .search-identity-slot .search-underline { width: 100% !important; }

/* Keep center perfectly centered and filter pinned right */
.search-page .lib-hero-grid .lib-tabs { justify-self: center !important; }
.search-page .lib-hero-grid .lib-hero-cta { justify-self: end !important; }

/* Center layout: [flex left | exact-center tabs | tight right] */
.search-page .lib-hero-grid {
  display: grid !important;
  grid-template-columns: 1fr auto min-content !important; /* left flex, center auto, right min */
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
  width: 100% !important;
}

/* Center the three buttons exactly */
.search-page .lib-hero-grid .lib-tabs {
  justify-self: center !important;   /* dead center */
  display: inline-flex;
  gap: 8px;
}

/* Filter stays pinned to the far right */
.search-page .lib-hero-grid .lib-hero-cta {
  justify-self: end !important;      /* keep it on the right edge */
}

/* Search sits on the LEFT but hugs the buttons (not full-width) */
.search-page .lib-hero-grid .search-identity-slot {
  min-width: 0 !important;
  justify-self: end !important;      /* nudge it toward center */
}

/* Give the search an intrinsic cap so it doesn't sprawl */
.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: min(42vw, 560px) !important;  /* shrink-to-fit, max cap */
  max-width: 560px !important;
}

/* Input fills that local width */
.search-page .search-input-underline { width: 100% !important; }

/* Give the hero row a positioning context */
.search-page .lib-hero { position: relative; }
.search-page .lib-hero-grid {
  position: relative;                /* anchor for absolute centering */
  display: grid !important;
  grid-template-columns: 1fr min-content; /* left flexes, right is tight */
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
  min-height: 64px;                  /* room for the centered tabs */
}

/* LEFT: search hugs center, doesn't sprawl */
.search-page .lib-hero-grid .search-identity-slot {
  justify-self: start;
  min-width: 0;
}
.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: min(42vw, 560px) !important;    /* cap so tabs can sit centered */
  max-width: 560px !important;
}

/* RIGHT: filter stays pinned to the far edge */
.search-page .lib-hero-grid .lib-hero-cta {
  justify-self: end;
}

/* DEAD-CENTER the three buttons regardless of left/right widths */
.search-page .lib-hero-grid .lib-tabs {                      /* above search/filter if they overlap */
  display: inline-flex;
  gap: 8px;
  pointer-events: auto;
}

/* Optional: make sure the centered group doesn't get pushed by margins */
.search-page .lib-hero-grid .lib-tabs > .lib-tab { margin: 0; }

/* True centered layout: [ search | TABS(center) | filter ] */
.search-page .lib-hero { position: relative; }

.search-page .lib-hero-grid {
  display: grid !important;
  grid-template-columns: 1fr auto 1fr;   /* left/right share remaining space */
  align-items: center;
  gap: clamp(12px, 2vw, 24px);
  width: 100%;
  min-height: 64px;
}

/* Middle: tabs naturally in the center (no absolute needed) */
.search-page .lib-hero-grid .lib-tabs {
  justify-self: center;                  /* center inside the auto column */
  display: inline-flex;
  gap: 8px;
}

/* Left: search hugs the center from the left side */
.search-page .lib-hero-grid .search-identity-slot {
  grid-column: 1;
  justify-self: end;                     /* push towards center */
  min-width: 0;
}
.search-page .lib-hero-grid .search-identity-slot .search-underline {
  width: min(42vw, 560px);               /* reasonable cap */
  max-width: 560px;
}

/* Right: filter pinned to the far right */
.search-page .lib-hero-grid .lib-hero-cta {
  grid-column: 3;
  justify-self: end;                     /* right edge */
}

/* Responsive stacking (optional) */
@media (max-width: 720px) {
  .search-page .lib-hero-grid {
    grid-template-columns: 1fr min-content;
    grid-template-areas:
      "search  filter"
      "tabs    tabs";
    row-gap: 12px;
  }
  .search-page .lib-hero-grid .search-identity-slot { grid-area: search; justify-self: start; }
  .search-page .lib-hero-grid .lib-hero-cta         { grid-area: filter; justify-self: end; }
  .search-page .lib-hero-grid .lib-tabs             { grid-area: tabs; justify-self: center; }
}

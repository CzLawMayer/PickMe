/* =========================
   Search page (cleaned)
   ========================= */

/* Tabs */
.search-page .lib-tabs .lib-tab { cursor: pointer; }
.search-page .lib-tabs .lib-tab.is-active {
  background: var(--bar2, #3949ab);
  color: #fff;
  border-color: transparent;
}

/* Single-column layout variant (no right feature panel) */
.library-layout.library-layout--full { grid-template-columns: 1fr !important; }

/* Identity slot (search lives here) */
.search-identity-slot {
  min-width: 0;
  flex: 1 1 auto;
  display: flex;
  align-items: center;
}

/* ==== Books grid ==== */
.search-page .search-books-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: var(--gap, clamp(16px, 2vw, 28px));
}
@media (max-width: 1280px) {
  .search-page .search-books-grid { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 820px) {
  .search-page .search-books-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 520px) {
  .search-page .search-books-grid { grid-template-columns: 1fr; }
}

/* ==== Review-style cards (cover on top, details below) ==== */
.search-page .lib-card.lib-card--review {
  display: block !important;
  height: auto !important;
  min-width: 0 !important;
  grid-template-columns: none !important;
  overflow: visible !important;
}
.search-page .lib-card.lib-card--review .lib-cover {
  position: relative;
  width: 100% !important;
  height: auto !important;
  aspect-ratio: 3 / 4;
  overflow: hidden !important;
  background: #111;
  pointer-events: auto;
  transition: transform 180ms ease, box-shadow 180ms ease, outline-color 180ms ease;
  will-change: transform;
  outline: 0 solid transparent;
}
.search-page .lib-card.lib-card--review .lib-cover img {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  display: block !important;
}
@media (hover: hover) and (pointer: fine) {
  .search-page .lib-card .lib-cover:hover {
    transform: translateY(-2px) scale(1.015);
    box-shadow: 0 8px 26px rgba(0,0,0,0.35), 0 2px 8px rgba(0,0,0,0.25);
  }
}

.search-page .lib-card.lib-card--review .lib-details.review-details {
  display: flex !important;
  flex-direction: column !important;
  gap: 8px !important;
  margin-top: 10px !important;
  height: auto !important;
  min-height: 0 !important;
  overflow: visible !important;
}

/* Type scales */
.search-page .lib-card.lib-card--review .lib-title-line {
  font-size: clamp(16px, 1.6vw, 20px) !important;
  font-weight: 800 !important;
  line-height: 1.2 !important;
  white-space: normal !important;
  overflow: hidden !important;
  display: -webkit-box !important;
  -webkit-line-clamp: 2 !important;
  -webkit-box-orient: vertical !important;
}
.search-page .lib-card.lib-card--review .lib-year-line {
  font-size: 13px !important;
  line-height: 1.2 !important;
  opacity: 0.9 !important;
}
.search-page .lib-card.lib-card--review .lib-author-line {
  font-size: 14px !important;
  line-height: 1.3 !important;
  color: rgba(255,255,255,0.8) !important;
}
.search-page .lib-card.lib-card--review .lib-row-actions.is-inline {
  margin-top: 6px !important;
  gap: 8px !important;
}

/* Kill review overlays/dimming on Search cards */
.search-page .lib-card .lib-cover::before,
.search-page .lib-card .lib-cover .review-overlay,
.search-page .lib-card .lib-cover .review-overlay-inner,
.search-page .lib-card.lib-card--review .review-overlay,
.search-page .lib-card.lib-card--review .review-overlay-inner,
.search-page .lib-card.lib-card--review .lib-cover::before {
  display: none !important;
  content: none !important;
  opacity: 0 !important;
  background: transparent !important;
  pointer-events: none !important;
}

/* Neutralize outlines & rings inside cards on Search */
.search-page .lib-card:focus,
.search-page .lib-card:focus-visible,
.search-page .lib-card:active,
.search-page .lib-card *:focus,
.search-page .lib-card *:focus-visible,
.search-page .lib-card *:active,
.search-page a:focus,
.search-page a:focus-visible,
.search-page button:focus,
.search-page button:focus-visible,
.search-page .lib-card:focus-within {
  outline: none !important;
  box-shadow: none !important;
}
.search-page a,
.search-page button,
.search-page .meta-icon-btn { -webkit-tap-highlight-color: transparent; }
.search-page .lib-card,
.search-page .lib-card .lib-cover,
.search-page .lib-card .meta-icon-btn { border-color: transparent !important; }
.search-page .meta-icon-btn:focus,
.search-page .meta-icon-btn:focus-visible,
.search-page .meta-icon-btn:active {
  outline: none !important;
  box-shadow: none !important;
  border-color: transparent !important;
}

/* Ensure cover image isn’t dimmed */
.search-page .lib-card .lib-cover > img:first-child {
  filter: none !important;
  opacity: 1 !important;
}

/* =========================
   HERO (top banner) — final layout & visuals
   ========================= */

/* Hero container uses page gutters (no full-bleed hacks) */
.search-page .lib-hero {
  --hero-h: clamp(64px, 8vw, 88px);
  position: relative !important;
  min-height: var(--hero-h) !important;
  display: flex !important;            /* vertically center inner grid */
  align-items: center !important;
  width: 100% !important;
  max-width: 100% !important;
  margin-left: 0 !important;
  padding-left: var(--pad-x, 28px) !important;
  padding-right: var(--pad-x, 28px) !important;
  overflow: visible !important;
}

/* One-row layout: [ search ][ filter ][ spacer ][ tabs ] */
.search-page .lib-hero > .lib-hero-grid {
  display: grid !important;
  grid-template-columns: auto auto 1fr auto !important; /* search | filter | flex | tabs */
  grid-template-rows: 1fr !important;
  grid-auto-flow: column !important;
  align-items: center !important;
  column-gap: 10px !important;
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important; /* gutters live on .lib-hero */
}

/* Search block sits in column 1 */
.search-page .lib-hero-grid .search-identity-slot {
  grid-column: 1 !important;
  justify-self: start !important;
  min-width: 0 !important;
}

/* Filter sits immediately after search in column 2 */
.search-page .lib-hero-grid .lib-hero-cta {
  grid-column: 2 !important;
  display: inline-grid !important;
  place-items: center !important;
  height: var(--search-h, 46px) !important;
  width: calc(var(--search-h, 46px) * 1.3) !important;
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  cursor: pointer !important;
}

/* Tabs cluster hugs the inner right edge (column 4) */
.search-page .lib-hero-grid .lib-tabs {
  grid-column: 4 !important;
  justify-self: end !important;
  display: inline-flex !important;
  flex-wrap: nowrap !important;
  align-items: center !important;
  gap: clamp(10px, 1.6vw, 16px) !important;
  width: max-content !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: visible !important;
}
.search-page .lib-hero-grid .lib-tabs > .lib-tab {
  display: inline-flex !important;
  flex: 0 0 auto !important;
  white-space: nowrap !important;
  margin: 0 !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Optional nudge for the tabs line on Search only */
body .search-page .lib-hero .lib-hero-grid .lib-tabs {
  transform: translateX(var(--tabs-nudge, -20px)) !important;
}
body .search-page .lib-hero .lib-hero-grid .lib-tabs:hover,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:focus-within {
  transform: translateX(var(--tabs-nudge, -18px)) !important;
}

/* Mobile: search + filter on first row, tabs below right-aligned */
@media (max-width: 720px) {
  .search-page .lib-hero > .lib-hero-grid {
    grid-template-columns: 1fr min-content !important;
    grid-template-rows: auto auto !important;
    grid-auto-rows: auto !important;
    grid-auto-flow: row !important;
    row-gap: 12px !important;
  }
  .search-page .lib-hero-grid .search-identity-slot { grid-column: 1 / 2 !important; }
  .search-page .lib-hero-grid .lib-hero-cta         { grid-column: 2 / 3 !important; justify-self: end !important; }
  .search-page .lib-hero-grid .lib-tabs             { grid-column: 1 / -1 !important; justify-self: end !important; margin-top: 8px; }
}

/* =========================
   Search control visuals — single-outline, split fill (icon | input)
   ========================= */

.search-page .lib-hero {
  --search-h: 46px;
  --outer-bd: 1px solid rgba(255,255,255,0.16);
  --outer-bd-focus: 1px solid rgba(255,255,255,0.28);
  --ring: 0 0 0 2px rgba(255,255,255,0.08);
  --icon-w: 46px;              /* square icon area */
  --icon-bg: #fc5f2e;          /* orange half */
  --input-bg: #0e0e0e;         /* dark half */
  --pad-x: 14px;
  --icon-fs: clamp(34px, 3vw, 42px);
}

/* The single outer rectangle */
.search-page .lib-hero .lib-hero-grid .search-identity-slot > .search-underline {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0 !important;
  height: var(--search-h) !important;
  box-sizing: border-box !important;
  border: var(--outer-bd) !important;
  border-radius: 0 !important;
  background: transparent !important;  /* children paint halves */
  overflow: hidden !important;
  padding: 0 !important;
  margin: 0 !important;
  cursor: text !important;
  width: clamp(260px, 32vw, 560px) !important;
}
.search-page .lib-hero .lib-hero-grid .search-identity-slot > .search-underline:hover {
  border: var(--outer-bd-focus) !important;
}
.search-page .lib-hero .lib-hero-grid .search-identity-slot > .search-underline:focus-within {
  border: var(--outer-bd-focus) !important;
  box-shadow: var(--ring) !important;
}

/* LEFT half — icon area */
.search-page .search-underline .search-icon {
  width: var(--icon-w) !important;
  height: var(--search-h) !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: var(--icon-bg) !important;
  color: #fff !important;
  line-height: 1 !important;
  font-size: var(--icon-fs) !important;
  transform: translateY(1px) !important; /* your 1px nudge */
  border: 0 !important;
  box-shadow: none !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* RIGHT half — input area */
.search-page .search-underline .search-input-underline {
  flex: 1 1 auto !important;
  min-width: 200px !important;
  height: var(--search-h) !important;
  background: var(--input-bg) !important;
  color: #fff !important;
  -webkit-text-fill-color: #fff !important;
  border: 0 !important;
  outline: none !important;
  box-shadow: none !important;
  padding: 0 var(--pad-x) !important;
  margin: 0 !important;
  line-height: 1.2 !important;
  box-sizing: border-box !important;

  /* typography (placeholder == typed) */
  --search-fs: clamp(18px, calc(var(--tab-h) * 0.46), 22px);
  font-weight: 800 !important;
  font-size: var(--search-fs) !important;
}
.search-page .search-underline .search-input-underline::placeholder {
  font-weight: 800;
  font-size: var(--search-fs);
  color: rgba(255,255,255,0.65);
}

/* Inner padding so text doesn’t touch edges */
.search-page .search-underline .search-input-underline {
  --pad-l: 16px;  --pad-r: 16px;
  padding: 0 var(--pad-r) 0 var(--pad-l) !important;
}
body .search-page .lib-hero .lib-hero-grid .search-identity-slot > .search-underline .search-input-underline {
  box-sizing: border-box !important;
  width: 100% !important;
  padding-left: 16px !important;
  padding-right: 16px !important;
  text-indent: 0 !important;
}
body .search-page .lib-hero .lib-hero-grid .search-identity-slot > .search-underline .search-input-underline::placeholder {
  text-indent: 0 !important;
}

/* Filter icon sizing/alignment */
.search-page .lib-hero-cta .material-symbols-outlined {
  font-size: 40px !important;
  line-height: 1 !important;
  transform: none !important;
  color: #fff !important;
}
.search-page .lib-hero-cta .lib-cta--icon:hover {
  filter: brightness(1.2);
  transform: scale(1.03);
}

/* Keep row alignment tidy */
.search-page .search-underline { 
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
}
.search-page .lib-hero-grid {
  align-items: center !important;
  column-gap: 14px !important; /* small comfy spacing overall */
}

/* Mobile width for the field */
@media (max-width: 720px){
  .search-page .search-underline { width: min(88vw, 560px); }
}

/* === Search left alignment: 28px gutter & no extra offsets ========== */
.search-page .lib-hero {
  padding-left: 28px !important;   /* left gutter to match AppHeader */
}

.search-page .lib-hero > .lib-hero-grid {
  padding: 0 !important;           /* gutters live on .lib-hero */
  margin: 0 !important;
}

.search-page .lib-hero-grid .search-identity-slot {
  grid-column: 1 !important;
  justify-self: start !important;  /* hug the hero's inner left edge */
  margin: 0 !important;
  padding: 0 !important;
}

.search-page .lib-hero-grid .search-identity-slot > .search-underline {
  margin: 0 !important;            /* kill any leftover left nudges */
  transform: none !important;      /* cancel old translate hacks */
}

/* === Filter: align to search (dead-center, no offsets) ================= */
.search-page .lib-hero > .lib-hero-grid {
  grid-template-columns: auto auto 1fr auto !important; /* search | filter | spacer | tabs */
  column-gap: 10px !important;                           /* tidy gap between search & filter */
}

.search-page .lib-hero-grid .lib-hero-cta {
  grid-column: 2 !important;           /* sits right after the search */
  justify-self: start !important;      /* hug the search horizontally */
  align-self: center !important;       /* vertical center in the hero row */
  position: static !important;         /* kill absolute/fixed leftovers */
  margin: 0 !important;
  padding: 0 !important;
  transform: none !important;          /* kill translate nudges */
}

/* Make the button a clean, centered square matching the search height */
.search-page .lib-hero-cta .lib-filter-btn,
.search-page .lib-hero-cta .lib-cta--icon {
  display: inline-grid !important;
  place-items: center !important;      /* center horizontally & vertically */
  height: var(--search-h, 46px) !important;
  width: calc(var(--search-h, 46px) * 1.1) !important;  /* comfy hit area */
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  transform: none !important;
}

/* Icon inside: no vertical nudge, same size system as search icon */
.search-page .lib-hero-cta .material-symbols-outlined {
  font-size: var(--icon-fs, clamp(34px, 3vw, 42px)) !important;
  line-height: 1 !important;
  transform: none !important;          /* kill translateY tweaks */
  color: #fff !important;
}

/* Safety: keep the search block tight to the left gutter (28px already set) */
.search-page .lib-hero-grid .search-identity-slot > .search-underline {
  margin: 0 !important;
  transform: none !important;
}

/* === Restore visible caret in the Search input ======================= */
.search-page input.search-input-underline {
  /* make sure it's focusable & visible */
  display: inline-block !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;

  /* text + caret */
  color: #fff !important;
  -webkit-text-fill-color: #fff !important;  /* WebKit */
  caret-color: #fff !important;              /* the blinking caret */
}

/* keep the caret white on focus */
.search-page input.search-input-underline:focus,
.search-page input.search-input-underline:focus-visible {
  caret-color: #fff !important;
}

/* iOS/WebKit quirk: transforms on ancestors can hide the caret.
   Nuke any leftover transforms/filters in the search cluster. */
.search-page .lib-hero-grid .search-identity-slot,
.search-page .lib-hero-grid .search-identity-slot *,
.search-page .search-underline,
.search-page .search-underline * {
  transform: none !important;
  filter: none !important;
}

/* === Filter popover: align to the filter button (top-right under it) === */
.search-page .lib-hero-grid .lib-hero-cta {
  position: relative !important;     /* anchor for the popover */
  overflow: visible !important;       /* allow the popover to show outside */
}

.search-page .lib-filter-menu {
  position: absolute !important;
  top: calc(100% + 8px) !important;   /* 8px gap below the button */
  right: 0 !important;                /* align popover's right edge to button */
  left: auto !important;
  bottom: auto !important;

  transform: none !important;         /* kill stray transforms */
  margin: 0 !important;
  z-index: 3000 !important;           /* above header/cards */
}

/* Optional: keep it sane on narrow screens */
@media (max-width: 720px) {
  .search-page .lib-filter-menu {
    max-width: 92vw !important;
    right: 0 !important;
    left: auto !important;
  }
}

/* === Minimal text-only style for the three right buttons ============ */
.search-page .lib-hero-grid .lib-tabs .lib-tab {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  color: #fff !important;
  font-weight: 800 !important;
  font-size: clamp(14px, calc(var(--tab-h) * 0.34), 18px) !important;
  text-transform: none !important;
  letter-spacing: normal !important;
  line-height: 1 !important;
  padding: 0 !important;
  margin: 0 !important;
  cursor: pointer !important;
  transition: color 0.2s ease;
}

/* Hover/focus feedback (subtle) */
.search-page .lib-hero-grid .lib-tabs .lib-tab:hover,
.search-page .lib-hero-grid .lib-tabs .lib-tab:focus-visible {
  color: rgba(255,255,255,0.7) !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Remove any active background highlight */
.search-page .lib-hero-grid .lib-tabs .lib-tab.is-active {
  background: transparent !important;
  color: #fff !important;
  border: none !important;
}

/* === FINAL HARD FREEZE: stop any hover nudge on the right-side text buttons === */

/* 0) Nuke container hover transforms (some builds shift the whole group) */
body .search-page .lib-hero .lib-hero-grid .lib-tabs,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:hover,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:focus-within {
  transform: none !important;
  translate: none !important;
  transition: none !important;
}

/* 1) Lock each tab's box so width never changes */
body .search-page .lib-hero-grid .lib-tabs .lib-tab {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;

  /* text-only, fixed metrics */
  background: transparent !important;
  color: #fff !important;
  font-weight: 800 !important;
  font-size: clamp(14px, calc(var(--tab-h) * 0.34), 18px) !important;
  line-height: 1 !important;
  letter-spacing: normal !important;
  text-transform: none !important;
  text-decoration: none !important;

  /* zero layout drift */
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
  box-shadow: none !important;
  box-sizing: border-box !important;
  outline: 0 !important;

  /* kill animations & subpixel moves */
  transition: none !important;
  transform: none !important;
  translate: none !important;
  scale: 1 !important;

  /* avoid underline pseudo-lines from other themes */
  position: relative !important;
}

/* 2) Keep all interactive states identical */
body .search-page .lib-hero-grid .lib-tabs .lib-tab:hover,
body .search-page .lib-hero-grid .lib-tabs .lib-tab:focus,
body .search-page .lib-hero-grid .lib-tabs .lib-tab:focus-visible,
body .search-page .lib-hero-grid .lib-tabs .lib-tab:active,
body .search-page .lib-hero-grid .lib-tabs .lib-tab.is-active {
  background: transparent !important;
  color: #fff !important;
  text-decoration: none !important;
  border: 0 !important;
  box-shadow: none !important;
  transform: none !important;
  translate: none !important;
  scale: 1 !important;
  letter-spacing: normal !important;
  transition: none !important;
  outline: 0 !important;
}

/* 3) Kill any fancy underline/indicator bars injected via pseudo-elements */
body .search-page .lib-hero-grid .lib-tabs .lib-tab::before,
body .search-page .lib-hero-grid .lib-tabs .lib-tab::after {
  content: none !important;
  display: none !important;
  border: 0 !important;
  width: 0 !important;
  height: 0 !important;
  transform: none !important;
  transition: none !important;
}

/* 4) If a child span/link had its own hover transform, flatten it too */
body .search-page .lib-hero-grid .lib-tabs .lib-tab *,
body .search-page .lib-hero-grid .lib-tabs .lib-tab *:hover {
  transform: none !important;
  translate: none !important;
  scale: 1 !important;
  text-decoration: none !important;
  transition: none !important;
  border: 0 !important;
  box-shadow: none !important;
  outline: 0 !important;
}

/* 5) Ensure the tabs group's spacing doesn't change on hover */
body .search-page .lib-hero-grid .lib-tabs {
  gap: clamp(10px, 1.6vw, 16px) !important;
}

/* Make each tab only as wide as its text */
.search-page .lib-hero-grid .lib-tabs {
  display: inline-flex !important;
  align-items: center !important;
  gap: clamp(10px, 1.6vw, 16px) !important;
  /* prevent spacing rules from stretching children */
  justify-content: flex-end !important; /* or center/start per your layout */
}

.search-page .lib-hero-grid .lib-tabs .lib-tab {
  /* key bits that stop equal-width behavior */
  display: inline-flex !important;
  flex: 0 0 auto !important;
  width: auto !important;
  inline-size: auto !important;
  min-width: 0 !important;

  /* zero extra space */
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
  box-shadow: none !important;
  background: transparent !important;

  /* keep text tidy */
  white-space: nowrap !important;
  font-weight: 800 !important;
  font-size: clamp(14px, calc(var(--tab-h) * 0.34), 18px) !important;
  line-height: 1 !important;
  letter-spacing: normal !important;

  /* no hover drift */
  transition: none !important;
  transform: none !important;
}

/* Active/hover states that don't add size */
.search-page .lib-hero-grid .lib-tabs .lib-tab:hover,
.search-page .lib-hero-grid .lib-tabs .lib-tab:focus,
.search-page .lib-hero-grid .lib-tabs .lib-tab:active,
.search-page .lib-hero-grid .lib-tabs .lib-tab.is-active {
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  transform: none !important;
}

/* 1) Make the hero itself own the same gutters as AppHeader */
.search-page .lib-hero {
  /* AppHeader uses 28px; inherit the same token if you have it */
  --pad-x: 38px;
  box-sizing: border-box !important;
  padding-right: var(--pad-x) !important; /* <-- key bit */
}

/* 2) The inner grid must NOT add extra padding/margins */
.search-page .lib-hero > .lib-hero-grid {
  margin: 0 !important;
  padding: 0 !important;    /* gutters live on .lib-hero */
  width: 100% !important;
}

/* 3) Tabs hug the hero’s inner right edge with no extra padding/nudges */
.search-page .lib-hero-grid .lib-tabs {
  justify-self: end !important;  /* pin to hero’s inner right */
  padding: 0 !important;         /* no extra space beyond the 28px on hero */
  margin: 0 !important;
  transform: none !important;    /* kill previous translateX nudges */
}

/* If you had that earlier “optional nudge”, hard-neutralize it */
body .search-page .lib-hero .lib-hero-grid .lib-tabs,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:hover,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:focus-within {
  transform: none !important;
}

/* 4) Keep each tab only as wide as its text (no stretch) */
.search-page .lib-hero-grid .lib-tabs .lib-tab {
  display: inline-flex !important;
  flex: 0 0 auto !important;
  width: auto !important;
  min-width: 0 !important;
  padding: 0 !important;   /* no added width */
  margin: 0 !important;
  border: 0 !important;
  background: transparent !important;
  white-space: nowrap !important;
  transition: none !important;
  transform: none !important;
}

/* --- Bigger spacing & font for Books / Users / Genres --- */

/* 1) Try flex gap first (modern browsers) */
body .search-page .lib-hero .lib-hero-grid .lib-tabs {
  gap: 32px !important; /* increase space between buttons */
}

/* 2) Hard fallback spacing in case some rule kills gap */
body .search-page .lib-hero .lib-hero-grid .lib-tabs .lib-tab + .lib-tab {
  margin-left: 32px !important; /* guarantees visible spacing */
}

/* 3) Larger type (text-hugging buttons) */
body .search-page .lib-hero .lib-hero-grid .lib-tabs .lib-tab {
  font-size: 25px !important;
  line-height: 1 !important;
  font-weight: 800 !important;
}


/* --- four-color underline for active tab --- */
.search-page .lib-hero-grid .lib-tabs .lib-tab {
  position: relative !important;   /* anchor underline */
  padding: 0 !important;           /* stays text-hugging */
}

.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-label {
  display: inline-block !important;
  font-weight: 800 !important;
  line-height: 1 !important;
}

/* hidden by default */
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
  position: absolute !important;
  left: 0; right: 0;
  top: calc(100% + 6px);           /* distance under text */
  display: grid !important;
  grid-template-columns: repeat(4, 1fr);
  gap: 4px;
  height: 6px;                     /* bar height */
  opacity: 0;
  transform: translateY(2px);
  pointer-events: none;
  transition: opacity 160ms ease, transform 160ms ease;
}

/* show only on active tab */
.search-page .lib-hero-grid .lib-tabs .lib-tab.is-active .tab-underline {
  opacity: 1;
  transform: translateY(0);
}

/* segment colors (use your variables) */
:root,
.search-page .library-app {
  --bar1: #fc5f2e;
  --bar2: #d81b60;
  --bar3: #6a1b9a;
  --bar4: #1e88e5;
}

.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg { height: 100%; }
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg-1 { background: var(--bar1); }
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg-2 { background: var(--bar2); }
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg-3 { background: var(--bar3); }
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg-4 { background: var(--bar4); }

/* keep layout stable on wrap or resize */
@media (max-width: 720px) {
  .search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
    top: calc(100% + 5px);
    height: 5px;
    gap: 3px;
  }
}

/* tighten the 4-color underline so bars touch */
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
  gap: 0 !important;                 /* no space between segments */
}

.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline .seg {
  margin: 0 !important;              /* just in case */
  width: 100% !important;            /* equal widths */
  height: 100% !important;
  display: block !important;
}

.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
  transform: translateY(0) translateZ(0) !important;
}

/* bring the 4-color bar up tight under the label */
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
  /* sit just below text; tighten as needed */
  top: calc(100% + -8px) !important;  /* was +6px */
  height: 4px !important;            /* slightly slimmer bar looks tighter */
  gap: 0 !important;                  /* bars touch */
  transform: translateY(0) translateZ(0) !important;
}

/* keep the label compact so the bar hugs it */
.search-page .lib-hero-grid .lib-tabs .lib-tab .tab-label {
  line-height: 1 !important;         /* minimize extra vertical space */
  margin: 0 !important;
  padding: 0 !important;
}

/* mobile tweak (optional): 1px tighter, thinner bar */
@media (max-width: 720px) {
  .search-page .lib-hero-grid .lib-tabs .lib-tab .tab-underline {
    top: calc(100% + 1px) !important;
    height: 3px !important;
  }
}

/* lift Books/Profiles/Genres + their underline by 5px */
body .search-page .lib-hero .lib-hero-grid .lib-tabs {
  transform: translateY(-4px) !important;
}

/* keep any prior “neutralize transforms” rules from canceling it */
body .search-page .lib-hero .lib-hero-grid .lib-tabs:hover,
body .search-page .lib-hero .lib-hero-grid .lib-tabs:focus-within {
  transform: translateY(-4px) !important;
}

/* (optional) on small screens, keep it tight but a bit less aggressive */
@media (max-width: 720px) {
  body .search-page .lib-hero .lib-hero-grid .lib-tabs {
    transform: translateY(-4px) !important;
  }
}

/* clickable orange icon that behaves like the field */
.search-page .search-icon-btn {
  width: var(--icon-w) !important;
  height: var(--search-h) !important;
  display: inline-grid !important;
  place-items: center !important;
  background: var(--icon-bg) !important;
  color: #fff !important;
  border: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  cursor: text !important;               /* feels like “click to type” */
  line-height: 1 !important;
}
.search-page .search-icon-btn .material-symbols-outlined {
  font-size: var(--icon-fs, clamp(34px, 3vw, 42px)) !important;
}
.search-page .search-icon-btn:hover { filter: brightness(1.05); }
.search-page .search-icon-btn:focus { outline: none; }

/* make the whole control an anchor for the clear button */
.search-page .lib-hero .search-underline {
  position: relative !important;
}

/* give the input room so the X doesn't overlap text */
.search-page .search-underline .search-input-underline {
  padding-right: calc(var(--pad-x, 14px) + 28px) !important; /* 28px space for the X */
}

/* clear (×) button inside the field, right-aligned */
.search-page .search-underline .search-clear-btn {
  position: absolute !important;
  top: 50% !important;
  right: var(--pad-x, 14px) !important;       /* aligns with input's inner padding */
  transform: translateY(-50%) !important;

  width: 28px !important;
  height: 28px !important;
  display: inline-grid !important;
  place-items: center !important;

  border: 0 !important;
  border-radius: 50% !important;
  background: transparent !important;
  color: rgba(255,255,255,0.85) !important;
  cursor: pointer !important;

  padding: 0 !important;
  margin: 0 !important;
  line-height: 1 !important;
  box-shadow: none !important;
}

/* icon sizing */
.search-page .search-underline .search-clear-btn .material-symbols-outlined {
  font-size: 20px !important;
}

/* subtle hover/active without shifting layout */
@media (hover: hover) and (pointer: fine) {
  .search-page .search-underline .search-clear-btn:hover {
    filter: brightness(1.12);
  }
}
.search-page .search-underline .search-clear-btn:focus { outline: none !important; }

/* nudge the clear button further right inside the control */
.search-page .search-underline .search-clear-btn {
  right: 6px !important;           /* was var(--pad-x, 14px) */
}

/* keep text from colliding with the button at the new position */
.search-page .search-underline .search-input-underline {
  padding-right: calc(6px + 28px) !important;  /* 28px = button width */
}

/* make the left search icon feel clickable */
.search-page .search-icon-btn {
  cursor: pointer !important;           /* was text */
}

.search-page .search-icon-btn:hover {
  filter: brightness(1.07);
}

















/* ===== Users search layout ===== */
.search-page .users-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: clamp(18px, 2.4vw, 28px);
}

@media (max-width: 880px) {
  .search-page .users-grid { grid-template-columns: 1fr; }
}

.search-page .user-card {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: center;
  gap: clamp(16px, 2vw, 20px);
  min-width: 0;
}

.search-page .user-card.filler { visibility: hidden; height: 0; margin: 0; padding: 0; }

/* Avatar */
.search-page .user-avatar {
  width: clamp(64px, 8vw, 92px);
  height: clamp(64px, 8vw, 92px);
  border-radius: 9999px;
  background: #0f0f0f;
  color: #d9d9d9;
  display: grid;
  place-items: center;
  overflow: hidden;
  flex: 0 0 auto;
}
.search-page .user-avatar img {
  width: 100%; height: 100%; object-fit: cover; display: block;
}

/* Meta (text) */
.search-page .user-meta { min-width: 0; display: grid; gap: 6px; }

.search-page .user-name {
  font-weight: 800;
  font-size: clamp(18px, 2vw, 24px);
  line-height: 1.1;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

.search-page .user-username {
  color: rgba(255,255,255,0.7);
  font-size: clamp(13px, 1.5vw, 16px);
  line-height: 1.2;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Stats row */
.search-page .user-stats {
  display: inline-flex;
  align-items: center;
  gap: clamp(14px, 2vw, 22px);
  font-size: clamp(14px, 1.6vw, 18px);
  line-height: 1;
  color: rgba(255,255,255,0.9);
}

.search-page .user-stats .user-likes {
  display: inline-flex; align-items: center; gap: 6px;
}

.search-page .user-stats .material-symbols-outlined {
  font-size: 20px; line-height: 1; translate: 0 1px;
}

/* 4 cards per row on wide screens */
.search-page .users-grid {
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: clamp(16px, 2vw, 24px) !important;
}

/* tighten avatar a bit so 4-up breathes */
.search-page .user-avatar {
  width: clamp(56px, 6vw, 72px) !important;
  height: clamp(56px, 6vw, 72px) !important;
}

/* responsive steps */
@media (max-width: 1320px) {
  .search-page .users-grid { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
}
@media (max-width: 980px) {
  .search-page .users-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}
@media (max-width: 560px) {
  .search-page .users-grid { grid-template-columns: 1fr !important; }
}

/* Give Users the same side gutters & top breathing room as Books */
.search-page .users-grid {
  /* side gutters like AppHeader/Books */
  padding-left: var(--pad-x, 28px) !important;
  padding-right: var(--pad-x, 28px) !important;

  /* top offset so cards don’t stick to the hero */
  padding-top: clamp(8px, 1.2vw, 14px) !important;
  box-sizing: border-box !important;
}

/* Keep the 4-up layout */
.search-page .users-grid {
  grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
  gap: clamp(16px, 2vw, 24px) !important;
}

/* === Bigger Users cards (avatar + typography + spacing) === */

/* card spacing & vertical rhythm */
.search-page .users-grid {
  gap: clamp(20px, 2.2vw, 32px) !important;
  padding-top: clamp(14px, 1.6vw, 22px) !important;
}

/* larger avatar */
.search-page .user-avatar {
  width: clamp(80px, 8vw, 112px) !important;
  height: clamp(80px, 8vw, 112px) !important;
}

/* stronger typography */
.search-page .user-name {
  font-size: clamp(22px, 2.2vw, 28px) !important;
  line-height: 1.08 !important;
}

.search-page .user-username {
  font-size: clamp(15px, 1.6vw, 18px) !important;
}

.search-page .user-stats {
  font-size: clamp(16px, 1.8vw, 20px) !important;
  gap: clamp(18px, 2.2vw, 28px) !important;
}
.search-page .user-stats .material-symbols-outlined {
  font-size: clamp(20px, 1.8vw, 22px) !important;
}

/* keep 4-up on large screens, relax earlier than before to fit bigger cards */
.search-page .users-grid { grid-template-columns: repeat(4, minmax(0, 1fr)) !important; }

@media (max-width: 1400px) {
  .search-page .users-grid { grid-template-columns: repeat(3, minmax(0, 1fr)) !important; }
}
@media (max-width: 1000px) {
  .search-page .users-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}
@media (max-width: 560px) {
  .search-page .users-grid { grid-template-columns: 1fr !important; }
}

/* === Fill all heart icons with #d81b60 on the Search page === */

/* Material Symbols hearts (font icons): force filled style + color */
.search-page .user-stats .material-symbols-outlined,
.search-page .meta-icon-btn.like .material-symbols-outlined,
.search-page .lib-row-actions .material-symbols-outlined.favorite {
  color: #d81b60 !important;
  font-variation-settings: 'FILL' 1, 'wght' 700, 'GRAD' 0, 'opsz' 24 !important; /* make it filled */
}

/* If your LikeButton uses SVG for the heart, fill/stroke it pink too */
.search-page .meta-icon-btn.like .meta-icon-glyph,
.search-page .meta-icon-btn.like .meta-icon-glyph * {
  fill: #d81b60 !important;
  stroke: #d81b60 !important;
  color: #d81b60 !important; /* for any fallback font glyphs */
}

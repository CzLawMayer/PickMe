:root{
  --pad-x: 28px;
  --rows-gap: 16px;   /* space between rows */
  --rows-pad: 12px;   /* bottom breathing room in left column */
  --tile-gap: 16px;   /* between covers */
}

/* Let Library.css handle app header, hero, feature, two-column grid */

/* Under the hero, use the remaining height for two equal rows */
.library-left {
  /* Library.css already lays this as hero + content; we just ensure no overflow */
  overflow: hidden;
}

.rows{
  padding: 0 var(--pad-x) var(--rows-pad);
  min-height: 0;
  height: 100%;
  display: grid;
  grid-template-rows: 1fr 1fr;   /* equal row heights */
  gap: var(--rows-gap);
  overflow: hidden;              /* no vertical overflow out of left column */
}

/* Each section = header (auto) + rail (1fr) so rail always fits its row */
.subsec{
  min-height: 0;
  display: grid;
  grid-template-rows: auto 1fr;
  overflow: hidden;
}

/* Section header */
.subsec-head{ display: inline-block; }
.subsec-title{
  margin: 0 0 8px;
  font-weight: 800;
  line-height: 1.1;
  font-size: clamp(1.25rem, 2.8vw, 2rem);
  white-space: nowrap;
}
.subsec-bars{
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  height: 8px;
}
.bar{ border-radius: 0; }
.b1{ background:#fc5f2e; }
.b2{ background:#d81b60; }
.b3{ background:#6a1b9a; }
.b4{ background:#1e88e5; }

/* Rail consumes the remainder of the section height, no vertical overflow */
.books-rail{
  min-height: 0;
  height: 100%;
  overflow: hidden;
}

/* Track: horizontal scroller that ALWAYS matches rail height */
.books-track{
  display: flex;
  align-items: stretch;          /* tiles inherit the rail height */
  gap: var(--tile-gap);
  height: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}
.books-track::-webkit-scrollbar{ height: 6px; }
.books-track::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.25);
  border-radius: 999px;
}

/* Tiles fill rail height and keep 2:3 ratio; width derives from height */
.book-tile{
  flex: 0 0 auto;                /* no shrinking; scroll horizontally if needed */
  height: 100%;                  /* exactly the rail height */
  aspect-ratio: 2 / 3;           /* width auto-computed from height */
  background: #222 center / cover no-repeat;
  border: 0;
  border-radius: 0;
  margin: 0;
  box-shadow: none;
  cursor: pointer;
}
.book-tile:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 2px;
}

/* Ensure Published really sits in the bottom row (explicit, in case of reordering) */
.subsec.inprogress { grid-row: 1; }
.subsec.published  { grid-row: 2; }

/* clean, safe spacing between colored bar and covers */
.subsec{
  display: grid;
  grid-template-rows: auto 1fr;
  row-gap: 8px;        /* <- the breathing space you want */
  min-height: 0;
  overflow: hidden;
}

.books-track{ padding-bottom: 2px; } /* tiny buffer so the thin scrollbar isn’t cramped */

/* small gap above the first (In Progress) section */
.rows{
  padding-top: 8px; /* tweak to taste (6–12px) */
}

/* ==== Always-visible white slider for book rails ==== */
.books-track{
  overflow-x: scroll;                 /* show bar whenever content overflows */
  scrollbar-width: thin;              /* Firefox thickness */
  scrollbar-color: #fff rgba(255,255,255,.16); /* Firefox: thumb, track */
}

/* WebKit (Chrome/Edge/Safari) */
.books-track::-webkit-scrollbar{
  height: 8px;                        /* thickness */
}
.books-track::-webkit-scrollbar-track{
  background: rgba(255,255,255,.16);  /* subtle dark track */
  border-radius: 999px;
}
.books-track::-webkit-scrollbar-thumb{
  background: #fff;                   /* WHITE slider */
  border-radius: 999px;
  /* optional: softer edges on dark bg */
  box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset;
}

/* (Remove any previous :hover or :focus-within rules for .books-track scrollbars) */

/* Title + underline behave as one shrink-to-fit block */
.subsec-head{
  display: inline-grid;          /* stack title over bars */
  grid-template-rows: auto auto;
  width: max-content;            /* shrink to the widest child (the title) */
}

/* Title stays as-is */
.subsec-title{
  margin: 0 0 8px;
  font-weight: 800;
  line-height: 1.1;
  font-size: clamp(1.25rem, 2.8vw, 2rem);
  white-space: nowrap;           /* keep single line so underline matches */
}

/* Bars become an underline whose width == title width */
.subsec-bars{
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0;
  height: 8px;
  width: 100%;                   /* exactly the same width as the title above */
}

/* keep your colors */
.subsec-bars .bar { border-radius: 0; }
.subsec-bars .b1 { background:#fc5f2e; }
.subsec-bars .b2 { background:#d81b60; }
.subsec-bars .b3 { background:#6a1b9a; }
.subsec-bars .b4 { background:#1e88e5; }

/* default: no scrollbar visuals if there’s no overflow */
.books-track{
  overflow-x: auto;
  scrollbar-width: none;            /* Firefox: hide when not needed */
}
.books-track::-webkit-scrollbar{    /* WebKit: hide when not needed */
  height: 0;
}

/* when overflow exists, style the scrollbar (white thumb) */
.books-track.has-scroll{
  scrollbar-width: thin;                        /* Firefox: show */
  scrollbar-color: #fff rgba(255,255,255,.16);  /* thumb / track */
}
.books-track.has-scroll::-webkit-scrollbar{
  height: 8px;                                  /* visible thickness */
}
.books-track.has-scroll::-webkit-scrollbar-track{
  background: rgba(255,255,255,.16);
  border-radius: 999px;
}
.books-track.has-scroll::-webkit-scrollbar-thumb{
  background: #fff;                              /* white slider */
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset;
}

/* default: hide visuals (but keep horizontal scrolling) */
.books-track{
  overflow-x: auto;
  scrollbar-width: none;                /* Firefox hidden by default */
}
.books-track::-webkit-scrollbar{ height: 0; }   /* WebKit hidden */

/* show when needed (overflow detected) OR explicitly forced */
.books-track.has-scroll,
.books-track.force-scrollbar{
  scrollbar-width: thin;                              /* Firefox show */
  scrollbar-color: #fff rgba(255,255,255,.16);        /* thumb / track */
}
.books-track.has-scroll::-webkit-scrollbar,
.books-track.force-scrollbar::-webkit-scrollbar{
  height: 8px;
}
.books-track.has-scroll::-webkit-scrollbar-track,
.books-track.force-scrollbar::-webkit-scrollbar-track{
  background: rgba(255,255,255,.16);
  border-radius: 999px;
}
.books-track.has-scroll::-webkit-scrollbar-thumb,
.books-track.force-scrollbar::-webkit-scrollbar-thumb{
  background: #fff;
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(0,0,0,.25) inset;
}

.add-book-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  font-weight: 700;
  font-size: 0.95rem;
  line-height: 1;
  border-radius: 999px;
  border: 0;
  cursor: pointer;
  color: #111;
  background: #fff;
  transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
}

.add-book-btn:hover{ transform: translateY(-1px); }
.add-book-btn:active{ transform: translateY(0); opacity: 0.9; }
.add-book-btn:focus-visible{ outline: 2px solid rgba(255,255,255,.6); outline-offset: 2px; }

.add-book-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* Bigger, bolder button */
  padding: 14px 32px;
  font-weight: 800;
  font-size: 1.05rem;
  letter-spacing: 0.4px;

  border: none;
  border-radius: 999px;
  cursor: pointer;

  color: #ffffff;
  background-color: #1e88e5;
  box-shadow: 0 4px 14px rgba(0,0,0,0.25);
  transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
}

.add-book-btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.32);
}

.add-book-btn:active{
  transform: translateY(0);
  opacity: 0.9;
}

.add-book-btn:focus-visible{
  outline: 2px solid #fff;
  outline-offset: 3px;
}

/* Trailing "Add book" tile — scoped to In Progress only for safety */
.subsec.inprogress .books-track .book-add{
  /* same sizing as books */
  flex: 0 0 auto;
  height: 100%;
  aspect-ratio: 2 / 3;

  /* lighter than background, clear affordance */
  background: rgba(255,255,255,0.08);
  border: 0;
  border-radius: 0;
  position: relative;
  cursor: pointer;

  /* subtle separation like other tiles */
  box-shadow: none;
}

/* centered white + */
.subsec.inprogress .books-track .book-add::before{
  content: "+";
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: clamp(24px, 6vmin, 44px);
  font-weight: 800;
  line-height: 1;
  color: #fff;
  pointer-events: none;
}

/* hover/active/focus states */
.subsec.inprogress .books-track .book-add:hover{
  background: rgba(255,255,255,0.12);
}
.subsec.inprogress .books-track .book-add:active{
  background: rgba(255,255,255,0.16);
}
.subsec.inprogress .books-track .book-add:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 3px;
}

/* In-Progress trailing "Add book" tile */
.subsec.inprogress .books-track .book-add{
  /* same size as a book cover */
  flex: 0 0 auto;
  height: 100%;
  aspect-ratio: 2 / 3;

  /* reset any inherited spacing */
  padding: 0;
  margin: 0;
  border: 0;
  border-radius: 0;

  /* visual */
  background: rgba(255,255,255,0.10);
  cursor: pointer;
  position: relative;

  /* perfect centering for the + */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Big, perfectly centered + */
.subsec.inprogress .books-track .book-add::before{
  content: "+";
  font-weight: 700;
  line-height: 1;
  /* Bigger symbol */
  font-size: clamp(44px, 9vmin, 84px);
  color: #fff;
  /* subtle inner edge so it pops on any cover shade */
  text-shadow: 0 0 2px rgba(0,0,0,.45);
  pointer-events: none;
}

/* states */
.subsec.inprogress .books-track .book-add:hover{
  background: rgba(255,255,255,0.14);
}
.subsec.inprogress .books-track .book-add:active{
  background: rgba(255,255,255,0.18);
}
.subsec.inprogress .books-track .book-add:focus-visible{
  outline: 2px solid rgba(255,255,255,.6);
  outline-offset: 3px;
}

/* Add-book card in Submit page grid */
.lib-card-add {
  padding: 0;
  background: transparent;
  border: none;
  cursor: pointer;
}

.lib-cover-add {
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.10);
  display: flex;
  align-items: center;
  justify-content: center;
}

.lib-cover-add-plus {
  font-size: clamp(44px, 9vmin, 84px);
  font-weight: 800;
  line-height: 1;
  color: #fff;
  text-shadow: 0 0 2px rgba(0, 0, 0, 0.45);
}


